/** CopyRight Andrew Dodson, license held at http://adodson.com/hello.js, DO NOT REMOVE THIS */
var hello=function(){function C(a){a.error||(a.name||(a.name=a.title||a.message||a.message),a.picture||(a.picture=a.thumbnailLink),a.thumbnail||(a.thumbnail=a.thumbnailLink),"application/vnd.google-apps.folder"===a.mimeType&&(a.type="folder",a.files="https://www.googleapis.com/drive/v2/files?q=%22"+a.id+"%22+in+parents"))}function A(a){var b=function(a){var b=0,d,c={id:a.id.$t,name:a.title.$t,description:a.summary.$t,updated_time:a.updated.$t,created_time:a.published.$t,picture:a.media$group.media$content[0].url,
thumbnail:a.media$group.media$content[0].url,width:a.media$group.media$content[0].width,height:a.media$group.media$content[0].height};if("link"in a)for(b=0;b<a.link.length;b++)if(a.link[b].rel.match(/\#feed$/)){c.photos=a.link[b].href;c.files=a.link[b].href;c.upload_location=a.link[b].href;break}if("category"in a&&a.category.length){d=a.category;for(b=0;b<d.length;b++)d[b].scheme&&d[b].scheme.match(/\#kind$/)&&(c.type=d[b].term.replace(/^.*?\#/,""))}if("media$thumbnail"in a.media$group){d=a.media$group.media$thumbnail;
c.thumbnail=a.media$group.media$thumbnail[0].url;c.images=[];for(b=0;b<d.length;b++)c.images.push({source:d[b].url,width:d[b].width,height:d[b].height});c.images.push({source:a.media$group.media$content[0].url,width:a.media$group.media$content[0].width,height:a.media$group.media$content[0].height})}return c},c=[];if("feed"in a&&"entry"in a.feed){for(d=0;d<a.feed.entry.length;d++)c.push(b(a.feed.entry[d]));return{data:c}}if("entry"in a)return b(a.entry);if("items"in a){for(var d=0;d<a.items.length;d++)C(a.items[d]);
return{data:a.items}}C(a);return a}function D(a){for(var b in a)if(a.hasOwnProperty(b)&&(j("input",a[b])&&"file"===a[b].type||"FileList"in window&&a[b]instanceof window.FileList||"File"in window&&a[b]instanceof window.File||"Blob"in window&&a[b]instanceof window.Blob))return!0;return!1}function E(a,b){n(b.network,b);if(!("display"in f)||"page"!==f.display){var c=window.opener||window.parent;if(c&&"hello"in c&&c.hello){var d=b.callback;try{delete b.callback}catch(e){}b.error?c.hello.trigger(b.network+
":"+d+".failed",b):(c.hello.trigger(b.network+":"+d+".login",{network:b.network,authResponse:b}),c.hello._store(b.network,b));n(b.network,b)}window.close();l("Trying to close window")}}function l(){"undefined"===typeof console||"undefined"===typeof console.log||("function"===typeof console.log?console.log.apply(console,arguments):console.log(Array.prototype.slice.call(arguments)))}function B(a){if(!a)return!0;if(a&&0<a.length)return!1;if(a&&0===a.length)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;
return!0}function j(a,b){var c="HTML"+(a||"").replace(/^[a-z]/,function(a){return a.toUpperCase()})+"Element";return window[c]?b instanceof window[c]:window.Element?b instanceof window.Element&&(!a||b.tagName===a):!(b instanceof Object||b instanceof Array||b instanceof String||b instanceof Number)&&b.tagName&&b.tagName===a}function F(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function v(a){var b={},c;if("string"===typeof a){c=a.replace(/^[\#\?]/,
"").match(/([^=\/\&]+)=([^\&]+)/g);l(c);if(c)for(var d=0;d<c.length;d++)a=c[d].split("="),b[a[0]]=decodeURIComponent(a[1]);return b}b=[];for(c in a)a.hasOwnProperty(c)&&a.hasOwnProperty(c)&&b.push([c,"?"===a[c]?"?":encodeURIComponent(a[c])].join("="));return b.join("&")}function n(a,b){var c=JSON.parse(localStorage.getItem("hello"))||{};if(a&&"undefined"===typeof b)return c[a];if(a&&""===b)try{delete c[a]}catch(d){c[a]=null}else if(a)c[a]=b;else return c;localStorage.setItem("hello",JSON.stringify(c));
return c}function u(a,b){var c,d={};if("object"===typeof a&&"object"===typeof b){for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c],c in b&&(d[c]=u(a[c],b[c])));for(c in b)b.hasOwnProperty(c)&&(c in a||(d[c]=b[c]))}else d=b;return d}function w(a,b){var c={},d=0,e=null,h=null;for(h in a)if(a.hasOwnProperty(h))break;if(1===b.length&&"object"===typeof b[0]&&"o!"!=a[h])return b[0];for(h in a)if(a.hasOwnProperty(h))if(e=typeof b[d],"function"===typeof a[h]&&a[h].test(b[d])||"string"===typeof a[h]&&(-1<a[h].indexOf("s")&&
"string"===e||-1<a[h].indexOf("o")&&"object"===e||-1<a[h].indexOf("i")&&"number"===e||-1<a[h].indexOf("a")&&"object"===e||-1<a[h].indexOf("f")&&"function"===e))c[h]=b[d++];else if("string"===typeof a[h]&&-1<a[h].indexOf("!"))return l("Whoops! "+h+" not defined"),!1;return c}function G(a){for(0===a.indexOf("/")?a=window.location.protocol+"//"+window.location.host+a:a.match(/^https?\:\/\//)||(a=(window.location.href.replace(/#.*/,"").replace(/\/[^\/]+$/,"/")+a).replace(/\/\.\//g,"/"));/\/[^\/]+\/\.\.\//g.test(a);)a=
a.replace(/\/[^\/]+\/\.\.\//g,"/");return a}function z(a,b,c){var d="string"===typeof a?document.createElement(a):a;if("object"===typeof b)if("tagName"in b)c=b;else for(var e in b)if(b.hasOwnProperty(e))if("object"===typeof b[e])for(var h in b[e])b[e].hasOwnProperty(h)&&(d[e][h]=b[e][h]);else"html"===e?d.innerHTML=b[e]:/^on/.test(e)?d[e]=b[e]:d.setAttribute(e,b[e]);"body"===c?function i(){document.body?document.body.appendChild(d):setTimeout(i,16)}():"object"===typeof c?c.appendChild(d):"string"===
typeof c&&(l(c),document.getElementsByTagName(c)[0].appendChild(d));return d}function H(a,b,c,d){var e=null,h=[],f,i=0,g=null,x=0,k=function(a){if(!x++){try{f&&f.parentNode.removeChild(f)}catch(b){l("could not remove iframe")}for(var c=0;c<h.length;c++)h[c]&&h[c].setAttribute("disabled",!1);d(a)}},s="ifrmhack_"+parseInt(1E6*Math.random(),10).toString(16);window[s]=k;var p;try{p=document.createElement('<iframe name="'+s+'">')}catch(m){p=document.createElement("iframe")}p.name=s;p.id=s;p.style.display=
"none";c&&c.callbackonload&&(p.onload=function(){k({response:"posted",message:"Content was posted"})});setTimeout(function(){k({error:{code:"timeout",message:"The post operation timed out"}})},y);document.body.appendChild(p);a+="&suppress_response_codes=true&redirect_uri="+encodeURIComponent(t.redirect_uri)+"&state="+JSON.stringify({callback:s})+"&callbackUrl="+encodeURIComponent(t.redirect_uri)+"&redirect-uri="+encodeURIComponent(t.redirect_uri);if(j("form",b)){e=b.form;for(i=0;i<e.elements.length;i++)e.elements[i]!==
b&&e.elements[i].setAttribute("disabled",!0);b=e}if(j("form",b)){e=b;for(i=0;i<e.elements.length;i++)!e.elements[i].disabled&&"file"===e.elements[i].type&&(e.encoding=e.enctype="multipart/form-data",e.elements[i].setAttribute("name","file"))}else{for(g in b)b.hasOwnProperty(g)&&(j("input",b[g])&&"file"===b[g].type)&&(e=b[g].form,e.encoding=e.enctype="multipart/form-data");e||(e=document.createElement("form"),document.body.appendChild(e),f=e);for(g in b)b.hasOwnProperty(g)&&(c=j("input",b[g])||j("textArea",
b[g])||j("select",b[g]),!c||b[g].form!==e?(e.elements[g]&&e.elements[g].parentNode.removeChild(e.elements[g]),i=document.createElement("input"),i.setAttribute("name",g),i.value=c?b[g].value:j(null,b[g])?b[g].innerHTML||b[g].innerText:b[g],e.appendChild(i)):c&&b[g].name!==g&&(b[g].setAttribute("name",g),b[g].name=g));for(i=0;i<e.children.length;i++)!(e.children[i].name in b)&&!0!==e.children[i].getAttribute("disabled")&&(e.children[i].setAttribute("disabled",!0),h.push(e.children[i]))}e.setAttribute("method",
"POST");e.setAttribute("action",a);e.setAttribute("target",s);e.target=s;setTimeout(function(){e.submit()},100)}function K(a){var b=a.data;if(j("form",b)){for(var b=b.elements,c={},d=0;d<b.length;d++)if("file"===b[d].type)if("FormData"in window){c[b[d].name]=b[d];break}else{if(!("files"in b[d]))return!1}else c[b[d].name]=b[d].value||b[d].innerHTML;b=c}if(j("input",b))if("files"in b)c={},c[b.name]=b.files,b=c;else return!1;if("File"in window&&b instanceof window.File||"Blob"in window&&b instanceof
window.Blob||"FileList"in window&&b instanceof window.FileList)b={file:b};if(!("FormData"in window&&b instanceof window.FormData))for(var e in b)if(b.hasOwnProperty(e))if("FileList"in window&&b[e]instanceof window.FileList)1===b[e].length?b[e]=b[e][0]:l("We were expecting the FileList to contain one file");else if(j("input",b[e])&&"file"===b[e].type){if(!("files"in b[e]))return!1}else j("input",b[e])||j("select",b[e])||j("textArea",b[e])?b[e]=b[e].value:j(null,b[e])&&(b[e]=b[e].innerHTML||b[e].innerText);
a.data=b;return!0}var L=0,r={},M={position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"},y=2E4,I=!1,t={redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:""},q={google:{name:"Google Plus",uri:{auth:"https://accounts.google.com/o/oauth2/auth",me:"oauth2/v1/userinfo?alt=json",base:"https://www.googleapis.com/","me/friends":"https://www.google.com/m8/feeds/contacts/default/full?alt=json&max-results=1000","me/share":"plus/v1/people/me/activities/public",
"me/feed":"plus/v1/people/me/activities/public","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json","me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=100","me/files":"https://www.googleapis.com/drive/v2/files?q=%22root%22+in+parents"},scope:{basic:"https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",email:"",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",
videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",wrap:{me:function(a){a.id&&(a.last_name=a.family_name||a.name.familyName,a.first_name=a.given_name||a.name.givenName,a.picture=a.picture||a.image.url,a.thumbnail=a.picture,a.name=a.displayName||a.name);return a},"me/friends":function(a){var b=[];if("feed"in
a&&"entry"in a.feed){for(var c=0;c<a.feed.entry.length;c++){var d=a.feed.entry[c];b.push({id:d.id.$t,name:d.title.$t,email:d.gd$email&&0<d.gd$email.length?d.gd$email[0].address:null,updated_time:d.updated.$t,picture:d.link&&0<d.link.length?d.link[0].href+"?access_token="+m.getAuthResponse("google").access_token:null,thumbnail:d.link&&0<d.link.length?d.link[0].href+"?access_token="+m.getAuthResponse("google").access_token:null})}return{data:b}}return a},"me/share":function(a){a.data=a.items;try{delete a.items}catch(b){a.items=
null}return a},"me/feed":function(a){a.data=a.items;try{delete a.items}catch(b){a.items=null}return a},"me/albums":A,"me/photos":A,"default":A},xhr:function(a){return"post"===a.method?!1:{}}},windows:{name:"Windows live",uri:{auth:"https://oauth.live.com/authorize",base:"https://apis.live.net/v5.0/","me/share":function(a,b){b("get"===a.method?"me/feed":"me/share")},"me/feed":function(a,b){b("get"===a.method?"me/feed":"me/share")},"me/files":"me/skydrive/files"},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",
birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},wrap:{me:function(a){a.id&&(a.email=a.emails?a.emails.preferred:null,a.picture="https://apis.live.net/v5.0/"+a.id+"/picture?access_token="+m.getAuthResponse("windows").access_token,a.thumbnail="https://apis.live.net/v5.0/"+a.id+"/picture?access_token="+
m.getAuthResponse("windows").access_token);return a},"me/friends":function(a){if("data"in a)for(var b=0;b<a.data.length;b++)a.data[b].picture="https://apis.live.net/v5.0/"+a.data[b].id+"/picture?access_token="+m.getAuthResponse("windows").access_token,a.data[b].thumbnail="https://apis.live.net/v5.0/"+a.data[b].id+"/picture?access_token="+m.getAuthResponse("windows").access_token;return a},"me/albums":function(a){if("data"in a)for(var b=0;b<a.data.length;b++)a.data[b].photos="https://apis.live.net/v5.0/"+
a.data[b].id+"/photos",a.data[b].files="https://apis.live.net/v5.0/"+a.data[b].id+"/photos";return a},"default":function(a){if("data"in a)for(var b=0;b<a.data.length;b++)a.data[b].picture&&(a.data[b].thumbnail=a.data[b].picture);return a}},xhr:function(a){return"post"===a.method&&!D(a.data)?(a.data=JSON.stringify(a.data),{contentType:"application/json"}):{}},jsonp:function(a){"get"!==a.method.toLowerCase()&&(a.data.method=a.method.toLowerCase(),a.method="get");return a}},facebook:{name:"Facebook",
uri:{auth:"http://www.facebook.com/dialog/oauth/",base:"https://graph.facebook.com/","me/share":"me/feed","me/files":"me/albums"},scope:{basic:"",email:"email",birthday:"user_birthday",events:"user_events",photos:"user_photos,user_videos",videos:"user_photos,user_videos",friends:"",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_stream",publish:"publish_stream",create_event:"create_event",offline_access:"offline_access"},wrap:{me:function(a){a.id&&(a.picture="http://graph.facebook.com/"+
a.id+"/picture",a.thumbnail="http://graph.facebook.com/"+a.id+"/picture");return a},"me/friends":function(a){if("data"in a)for(var b=0;b<a.data.length;b++)a.data[b].picture="http://graph.facebook.com/"+a.data[b].id+"/picture",a.data[b].thumbnail="http://graph.facebook.com/"+a.data[b].id+"/picture";return a},"me/albums":function(a){if("data"in a)for(var b=0;b<a.data.length;b++)a.data[b].files="https://graph.facebook.com/"+a.data[b].id+"/photos",a.data[b].photos="https://graph.facebook.com/"+a.data[b].id+
"/photos",a.data[b].cover_photo&&(a.data[b].thumbnail="https://graph.facebook.com/"+a.data[b].cover_photo+"/picture?access_token="+m.getAuthResponse("facebook").access_token),a.data[b].type="album",a.data[b].can_upload&&(a.data[b].upload_location="https://graph.facebook.com/"+a.data[b].id+"/photos");return a},"me/files":function(a){return this["me/albums"](a)},"default":function(a){if("data"in a)for(var b=0;b<a.data.length;b++)a.data[b].picture&&(a.data[b].thumbnail=a.data[b].picture),a.data[b].cover_photo&&
(a.data[b].thumbnail="https://graph.facebook.com/"+a.data[b].cover_photo+"/picture?access_token="+m.getAuthResponse("facebook").access_token);return a}},xhr:function(a){return"get"===a.method||"post"===a.method?{}:!1},jsonp:function(a){"get"!==a.method.toLowerCase()&&!D(a.data)&&(a.data.method=a.method.toLowerCase(),a.method="get");return a},post:function(){return{callbackonload:!0}}}},m={service:function(a){return"undefined"!==typeof a?n("sync_service",a):n("sync_service")},init:function(a,b,c){if(!a)return q;
var d=w({services:"o!",opts:"o",timeout:"i"},arguments),e;for(e in d.services)d.services.hasOwnProperty(e)&&"object"!==typeof d.services[e]&&(d.services[e]={id:d.services[e]});q=u(q,d.services);d.opts&&(t=u(t,d.opts),"redirect_uri"in d.opts&&(t.redirect_uri=G(d.opts.redirect_uri)));d.timeout&&(y=d.timeout);if(I)return q;I=!0;var h={},f={};(function g(){var a=n("error"),b=null;if(a&&"callback"in a&&a.callback in r){b=a.callback;try{delete a.callback}catch(d){}n("error",a);m.trigger(b,a)}for(var c in q)if(q.hasOwnProperty(c)){var e=
(a=m.getAuthResponse(c))?a.access_token:null;if(a&&"callback"in a&&a.callback in r){b=a.callback;try{delete a.callback}catch(j){}n(c,a);m.trigger(b,{network:c,authResponse:a})}if(a&&"expires"in a&&(!(c in f)||f[c]<(new Date).getTime()/1E3)&&a.expires<(new Date).getTime()/1E3)l(c+" has expired trying to resignin"),m.login(c,{display:"none"}),f[c]=(new Date).getTime()/1E3+600;h[c]!==e&&(m.trigger(c+":auth."+(!e?"logout":"login"),{network:c,authResponse:a}),h[c]=e)}setTimeout(g,1E3)})();return q},login:function(a,
b,c){var d,e=w({network:"s!",options:"o",callback:"f"},arguments);e.options=u(t,e.options||{});"string"!==typeof e.network&&l("Please specify a service.");var f=q[e.network],j="",i=!1;e.callback&&(j=""+Math.round(1E9*Math.random()),this.subscribe(j,function N(){i=!0;m.unsubscribe(j,N);e.callback.apply(this,arguments)}));var g=u(e.options,{client_id:f.id,scope:f.scope.basic,state:{network:e.network,display:e.options.display,callback:j,state:e.options.state}});if(d=e.options.scope){"string"!==typeof d&&
(d=d.join(","));g.state.scope=d.split(/,\s/);g.scope=(g.scope+","+d).replace(/[^,\s]+/ig,function(a){return a in f.scope?f.scope[a]:a});d=g;var x=f.scope_delim||",",k;k=g.scope.split(/,+/);if("object"!==typeof k)k=[];else{for(var s=[],p=0;p<k.length;p++)k[p]&&!(0===k[p].length||-1!==F(s,k[p]))&&s.push(k[p]);k=s}d.scope=k.join(x)}if((d=m.getAuthResponse(e.network))&&"expires"in d&&d.expires>(new Date).getTime()/1E3){x=d.scope||[];k=g.state.scope||[];s=[];for(p=0;p<k.length;p++)-1===F(x,k[p])&&s.push(k[p]);
if(0===s.length){this.trigger(j+".login",{network:e.network,authResponse:d});return}}g.redirect_uri=G(g.redirect_uri);g.state=JSON.stringify(g.state);d=f.uri.auth+"?"+v(g);if("none"===g.display)z("iframe",{src:d,style:M},"body");else if("popup"===g.display)var r=window.open(d,"Authentication","resizeable=true,height=550,width=500,left="+(window.innerWidth-500)/2+",top="+(window.innerHeight-550)/2),n=this,J=setInterval(function(){r.closed&&(clearInterval(J),i||n.trigger(j+".failed",{error:{code:"user_cancelled",
message:"Cancelled"},network:e.network}))},100);else window.location=d;return{url:d,method:g.display}},logout:function(a,b){if(a&&n(a))n(a,"");else if(a)l(a+" had no session");else{for(var c in q)q.hasOwnProperty(c)&&m.logout(c);m.service(!1)}b&&b(!1)},api:function(){var a=w({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);a.method=(a.method||"get").toLowerCase();a.data=a.data||{};a.path=a.path.replace(/^\/+/,"");var b=(a.path.split(/[\/\:]/,2)||[])[0].toLowerCase(),c;b in q?(c=
b,a.path=a.path.replace(RegExp("^"+b+":?/?"),"")):c=this.service();a.callback=a.callback||function(){};y=a.timeout||y;l("API:",a);var d=q[c];if(d){var e=a.callback;if(d.wrap&&(a.path in d.wrap||"default"in d.wrap))e=function(b){var c=a.path in d.wrap?a.path:"default";l(a.path,b);a.callback(d.wrap[c](b))};if(!(a.path in d.uri)||!1!==d.uri[a.path]){var b=a.path in d.uri?d.uri[a.path]:a.path,f=this.getAuthResponse(c),j=f?f.access_token:null,i=function(b){b.match(/^https?:\/\//)||(b=d.uri.base+b);var i=
{};j&&(i.access_token=j);var k=function(){b+=-1<b.indexOf("?")?"&":"?";if(!B(a.data)&&!K(a))H(b+v(i),a.data,"post"in d?d.post(a):null,e);else{var c={};if("delete"===a.method){var f=e;e=function(a){f(!a||B(a)?{response:"deleted"}:a)}}if("withCredentials"in new XMLHttpRequest&&(!("xhr"in d)||(c=d.xhr(a)))){var h=new XMLHttpRequest;h.onload=function(){var b=h.responseText?JSON.parse(h.responseText):null;e(b||("delete"!==a.method?{error:{message:"Could not get resource"}}:{}))};h.onerror=function(){e(h.responseText?
JSON.parse(h.responseText):{error:{message:"There was an error accessing "+b}})};i.suppress_response_codes=!0;b+=v(i);if("get"===a.method||"delete"===a.method)B(a.data)||(b+=(-1===b.indexOf("?")?"?":"&")+v(a.data)),a.data=null;else if(a.data&&"string"!==typeof a.data&&!(a.data instanceof FormData)){var j=new FormData,k;for(k in a.data)a.data.hasOwnProperty(k)&&(a.data[k]instanceof HTMLInputElement?"files"in a.data[k]&&0<a.data[k].files.length&&j.append(k,a.data[k].files[0]):j.append(k,a.data[k]));
a.data=j}h.open(a.method.toUpperCase(),b);c.contentType&&h.setRequestHeader("Content-Type",c.contentType);a.data&&a.data instanceof FormData&&"fake"in a.data&&a.data.fake?(h.setRequestHeader("Content-Type","multipart/form-data; boundary="+a.data.boundary),h.sendAsBinary(a.data.toString())):h.send(a.data);return{url:b,method:"XHR",data:a.data}}"jsonp"in d&&(a=d.jsonp(a));if("post"===a.method)return{url:H(b+v(i),a.data,"post"in d?d.post(a):null,e),method:"POST",data:a.data};i.callback="?";c=b+v(i);
k=a.data;var m=e,c=c+((-1===c.indexOf("?")?"?":"&")+v(k)),l="__lx_jsonp"+L++,r=0,q=document.getElementsByTagName("head")[0],n,u={error:{message:"server_error",code:"server_error"}},t=function(){r++||window.setTimeout(function(){m(u);q.removeChild(n)},0)};window[l]=function(a){u=a;try{delete window[l]}catch(b){}};n=z("script",{id:l,name:l,src:c.replace(/=\?(&|$)/,"="+l+"$1"),async:!0,onload:t,onerror:t,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&t()}});-1<window.navigator.userAgent.toLowerCase().indexOf("opera")&&
(j=z("script",{text:"document.getElementById('"+l+"').onerror();"}),n.async=!1);window.setTimeout(function(){u={error:{message:"timeout",code:"timeout"}};t()},y);q.appendChild(n);j&&q.appendChild(j);return{url:n.src,method:"JSONP"}}};return f&&"expires"in f&&f.expires<(new Date).getTime()/1E3||!f&&d.autologin?(l("Callback"),m.login(c,{display:"none"},function(a){"object"===typeof a&&"error"in a?e(a):k()}),{status:"Signing in"}):k()};"function"===typeof b?b(a,i):i(b)}else l('The path "'+a.path+'" is not recognised')}else l("No user"),
a.callback(!1)},getAuthResponse:function(a){return n(a||this.service())},subscribe:function(a,b){l("Subscribed",a,b);var c=w({evt:"s!",callback:"f!"},arguments);if(!c)return!1;r[c.evt]=[c.callback].concat(r[c.evt]||[])},unsubscribe:function(a,b){l("Unsubscribe",a,b);var c=w({evt:"s!",callback:"f"},arguments);if(!c)return!1;for(var d=0;d<r[c.evt].length;d++)if(!c.callback||r[c.evt][d]===c.callback)r[c.evt]=r[c.evt].splice(d,1)},trigger:function(a,b){l("Trigger",a,JSON.stringify(r));for(var c in r)if(r.hasOwnProperty(c)&&
-1<a.indexOf(c))for(var d=0;d<r[c].length;d++)r[c][d].call(this,b)},_param:v,_store:n,_append:z,_merge:u},f=v(window.location.hash||null);f||(f=v(window.location.search));if(f&&"state"in f){try{var O=JSON.parse(f.state),f=u(f,O)}catch(P){l("Could not decode state parameter")}"access_token"in f&&f.access_token&&f.network in q?(0===parseInt(f.expires_in,10)&&(f.expires_in=31449600),f.expires_in=parseInt(f.expires_in,10),f.expires=(new Date).getTime()/1E3+parseInt(f.expires_in,10),m.service(f.network),
E(f.network,f)):"error"in f&&f.error&&f.network in q&&(f.error_message=f.error_message||f.error_description,E("error",f));if(f&&(f.callback&&"result"in f&&f.result)&&f.callback in window.parent)window.parent[f.callback](JSON.parse(f.result))}return m}();