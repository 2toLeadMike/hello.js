/*! hellojs v1.11.1 | (c) 2012-2016 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */
/*! hellojs v1.11.1 | (c) 2012-2016 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */
{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "node_modules/process/browser.js",
    "src/hello.all.js",
    "src\\hello.amd.js",
    "src\\hello.chromeapp.js",
    "src\\hello.commonjs.js",
    "src\\src\\hello.js",
    "src\\hello.phonegap.js",
    "src\\hello.polyfill.js",
    "src\\modules\\dropbox.js",
    "src\\modules\\facebook.js",
    "src\\modules\\flickr.js",
    "src\\modules\\foursquare.js",
    "src\\modules\\github.js",
    "src\\modules\\google.js",
    "src\\modules\\instagram.js",
    "src\\modules\\joinme.js",
    "src\\modules\\linkedin.js",
    "src\\modules\\soundcloud.js",
    "src\\modules\\twitter.js",
    "src\\modules\\vk.js",
    "src\\modules\\windows.js",
    "src\\modules\\yahoo.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACxCA,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAAP,EAAY;AAC/C,QAAO,YAAW;AACjB,SAAO,KAAP,CADiB;EAAX,CAAP,CAD+C;CAAhD;;;;;;;;;;;;;ACKA,IAAI,QAAO,uDAAP,KAAkB,QAAlB,IAA8B,QAAO,OAAO,QAAP,CAAP,KAA2B,QAA3B,IAAuC,OAAO,QAAP,CAAgB,iBAAhB,EAAmC;;AAE3G,EAAC,YAAW;;;AAGX,QAAM,KAAN,CAAY,KAAZ,GAAoB,UAAS,GAAT,EAAc;;AAEjC,UAAO,MAAM,GAAN,EAAW,IAAX,CAAP,CAFiC;GAAd;;;AAHT,OAUX,CAAM,KAAN,CAAY,MAAZ,GAAqB,UAAS,GAAT,EAAc;;AAElC,SAAM,GAAN,EAAW,KAAX,EAFkC;GAAd;;;AAVV,OAiBX,CAAM,KAAN,CAAY,YAAZ,GAA2B,UAAS,QAAT,EAAmB;;AAE7C;;;;AAF6C,UAMtC,IAAP,C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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n",
    "'use strict';\n\nrequire('./hello.polyfill.js');\n\nrequire('./hello.js');\n\nrequire('./hello.chromeapp.js');\n\nrequire('./hello.phonegap.js');\n\nrequire('./modules/dropbox.js');\n\nrequire('./modules/facebook.js');\n\nrequire('./modules/flickr.js');\n\nrequire('./modules/foursquare.js');\n\nrequire('./modules/github.js');\n\nrequire('./modules/google.js');\n\nrequire('./modules/instagram.js');\n\nrequire('./modules/joinme.js');\n\nrequire('./modules/linkedin.js');\n\nrequire('./modules/soundcloud.js');\n\nrequire('./modules/twitter.js');\n\nrequire('./modules/vk.js');\n\nrequire('./modules/windows.js');\n\nrequire('./modules/yahoo.js');\n\nrequire('./hello.amd.js');\n\nrequire('./hello.commonjs.js');\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJoZWxsby5hbGwuanMiLCJzb3VyY2VzQ29udGVudCI6W119",
    "// Register as anonymous AMD module\nif (typeof define === 'function' && define.amd) {\n\tdefine(function() {\n\t\treturn hello;\n\t});\n}\n",
    "// Script to support ChromeApps\n// This overides the hello.utils.popup method to support chrome.identity.launchWebAuthFlow\n// See https://developer.chrome.com/apps/app_identity#non\n\n// Is this a chrome app?\n\nif (typeof chrome === 'object' && typeof chrome.identity === 'object' && chrome.identity.launchWebAuthFlow) {\n\n\t(function() {\n\n\t\t// Swap the popup method\n\t\thello.utils.popup = function(url) {\n\n\t\t\treturn _open(url, true);\n\n\t\t};\n\n\t\t// Swap the hidden iframe method\n\t\thello.utils.iframe = function(url) {\n\n\t\t\t_open(url, false);\n\n\t\t};\n\n\t\t// Swap the request_cors method\n\t\thello.utils.request_cors = function(callback) {\n\n\t\t\tcallback();\n\n\t\t\t// Always run as CORS\n\n\t\t\treturn true;\n\t\t};\n\n\t\t// Swap the storage method\n\t\tvar _cache = {};\n\t\tchrome.storage.local.get('hello', function(r) {\n\t\t\t// Update the cache\n\t\t\t_cache = r.hello || {};\n\t\t});\n\n\t\thello.utils.store = function(name, value) {\n\n\t\t\t// Get all\n\t\t\tif (arguments.length === 0) {\n\t\t\t\treturn _cache;\n\t\t\t}\n\n\t\t\t// Get\n\t\t\tif (arguments.length === 1) {\n\t\t\t\treturn _cache[name] || null;\n\t\t\t}\n\n\t\t\t// Set\n\t\t\tif (value) {\n\t\t\t\t_cache[name] = value;\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tif (value === null) {\n\t\t\t\tdelete _cache[name];\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\t// Open function\n\t\tfunction _open(url, interactive) {\n\n\t\t\t// Launch\n\t\t\tvar ref = {\n\t\t\t\tclosed: false\n\t\t\t};\n\n\t\t\t// Launch the webAuthFlow\n\t\t\tchrome.identity.launchWebAuthFlow({\n\t\t\t\turl: url,\n\t\t\t\tinteractive: interactive\n\t\t\t}, function(responseUrl) {\n\n\t\t\t\t// Did the user cancel this prematurely\n\t\t\t\tif (responseUrl === undefined) {\n\t\t\t\t\tref.closed = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Split appart the URL\n\t\t\t\tvar a = hello.utils.url(responseUrl);\n\n\t\t\t\t// The location can be augmented in to a location object like so...\n\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\tvar _popup = {\n\t\t\t\t\tlocation: {\n\n\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\tassign: function(url) {\n\n\t\t\t\t\t\t\t// If there is a secondary reassign\n\t\t\t\t\t\t\t// In the case of OAuth1\n\t\t\t\t\t\t\t// Trigger this in non-interactive mode.\n\t\t\t\t\t\t\t_open(url, false);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\thref: a.href\n\t\t\t\t\t},\n\t\t\t\t\tclose: function() {}\n\t\t\t\t};\n\n\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t// URL string\n\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\thello.utils.responseHandler(_popup, window);\n\t\t\t});\n\n\t\t\t// Return the reference\n\t\t\treturn ref;\n\t\t}\n\n\t})();\n}\n",
    "// CommonJS module for browserify\nif (typeof module === 'object' && module.exports) {\n\tmodule.exports = hello;\n}\n",
    "/**\n * @hello.js\n *\n * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.\n *\n * @author Andrew Dodson\n * @website https://adodson.com/hello.js/\n *\n * @copyright Andrew Dodson, 2012 - 2015\n * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.\n */\n\nself.hello = function(name) {\n\treturn hello.use(name);\n};\n\nhello.utils = {\n\n\t// Extend the first object with the properties and methods of the second\n\textend: function(r /*, a[, b[, ...]] */) {\n\n\t\t// Get the arguments as an array but ommit the initial item\n\t\tArray.prototype.slice.call(arguments, 1).forEach(function(a) {\n\t\t\tif (r instanceof Object && a instanceof Object && r !== a) {\n\t\t\t\tfor (var x in a) {\n\t\t\t\t\tr[x] = hello.utils.extend(r[x], a[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr = a;\n\t\t\t}\n\t\t});\n\n\t\treturn r;\n\t}\n};\n\n// Core library\nhello.utils.extend(hello, {\n\n\tsettings: {\n\n\t\t// OAuth2 authentication defaults\n\t\tredirect_uri: window.location.href.split('#')[0],\n\t\tresponse_type: 'token',\n\t\tdisplay: 'popup',\n\t\tstate: '',\n\n\t\t// OAuth1 shim\n\t\t// The path to the OAuth1 server for signing user requests\n\t\t// Want to recreate your own? Checkout https://github.com/MrSwitch/node-oauth-shim\n\t\toauth_proxy: 'https://auth-server.herokuapp.com/proxy',\n\n\t\t// API timeout in milliseconds\n\t\ttimeout: 20000,\n\n\t\t// Popup Options\n\t\tpopup: {\n\t\t\tresizable: 1,\n\t\t\tscrollbars: 1,\n\t\t\twidth: 500,\n\t\t\theight: 550\n\t\t},\n\n\t\t// Default scope\n\t\t// Many services require atleast a profile scope,\n\t\t// HelloJS automatially includes the value of provider.scope_map.basic\n\t\t// If that's not required it can be removed via hello.settings.scope.length = 0;\n\t\tscope: ['basic'],\n\n\t\t// Scope Maps\n\t\t// This is the default module scope, these are the defaults which each service is mapped too.\n\t\t// This list is only the popular ones being standardized.\n\t\t// By including them here it prevents the scopes from being applied accidentally\n\t\t// For less common scopes its assumed the Developer knows when to use the scope.\n\t\tscope_map: {\n\t\t\tbasic: '',\n\t\t\temail: '',\n\t\t\tfiles: '',\n\t\t\tfriends: '',\n\t\t\tphotos: '',\n\t\t\tpublish: '',\n\t\t\tpublish_files: '',\n\t\t\tshare: '',\n\t\t\tvideos: ''\n\t\t},\n\n\t\t// Default service / network\n\t\tdefault_service: null,\n\n\t\t// Force authentication\n\t\t// When hello.login is fired.\n\t\t// (null): ignore current session expiry and continue with login\n\t\t// (true): ignore current session expiry and continue with login, ask for user to reauthenticate\n\t\t// (false): if the current session looks good for the request scopes return the current session.\n\t\tforce: null,\n\n\t\t// Page URL\n\t\t// When 'display=page' this property defines where the users page should end up after redirect_uri\n\t\t// Ths could be problematic if the redirect_uri is indeed the final place,\n\t\t// Typically this circumvents the problem of the redirect_url being a dumb relay page.\n\t\tpage_uri: window.location.href\n\t},\n\n\t// Service configuration objects\n\tservices: {},\n\n\t// Use\n\t// Define a new instance of the HelloJS library with a default service\n\tuse: function(service) {\n\n\t\t// Create self, which inherits from its parent\n\t\tvar self = Object.create(this);\n\n\t\t// Inherit the prototype from its parent\n\t\tself.settings = Object.create(this.settings);\n\n\t\t// Define the default service\n\t\tif (service) {\n\t\t\tself.settings.default_service = service;\n\t\t}\n\n\t\t// Create an instance of Events\n\t\tself.utils.Event.call(self);\n\n\t\treturn self;\n\t},\n\n\t// Initialize\n\t// Define the client_ids for the endpoint services\n\t// @param object o, contains a key value pair, service => clientId\n\t// @param object opts, contains a key value pair of options used for defining the authentication defaults\n\t// @param number timeout, timeout in seconds\n\tinit: function(services, options) {\n\n\t\tvar utils = this.utils;\n\n\t\tif (!services) {\n\t\t\treturn this.services;\n\t\t}\n\n\t\t// Define provider credentials\n\t\t// Reformat the ID field\n\t\tfor (var x in services) {if (services.hasOwnProperty(x)) {\n\t\t\tif (typeof (services[x]) !== 'object') {\n\t\t\t\tservices[x] = {id: services[x]};\n\t\t\t}\n\t\t}}\n\n\t\t// Merge services if there already exists some\n\t\tutils.extend(this.services, services);\n\n\t\t// Update the default settings with this one.\n\t\tif (options) {\n\t\t\tutils.extend(this.settings, options);\n\n\t\t\t// Do this immediatly incase the browser changes the current path.\n\t\t\tif ('redirect_uri' in options) {\n\t\t\t\tthis.settings.redirect_uri = utils.url(options.redirect_uri).href;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Login\n\t// Using the endpoint\n\t// @param network stringify       name to connect to\n\t// @param options object    (optional)  {display mode, is either none|popup(default)|page, scope: email,birthday,publish, .. }\n\t// @param callback  function  (optional)  fired on signin\n\tlogin: function() {\n\n\t\t// Create an object which inherits its parent as the prototype and constructs a new event chain.\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\t\tvar promise = utils.Promise();\n\n\t\t// Get parameters\n\t\tvar p = utils.args({network: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\t// Local vars\n\t\tvar url;\n\n\t\t// Get all the custom options and store to be appended to the querystring\n\t\tvar qs = utils.diffKey(p.options, _this.settings);\n\n\t\t// Merge/override options with app defaults\n\t\tvar opts = p.options = utils.merge(_this.settings, p.options || {});\n\n\t\t// Merge/override options with app defaults\n\t\topts.popup = utils.merge(_this.settings.popup, p.options.popup || {});\n\n\t\t// Network\n\t\tp.network = p.network || _this.settings.default_service;\n\n\t\t// Bind callback to both reject and fulfill states\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.login auth'), emit.bind(this, 'auth.failed auth'));\n\n\t\t// Is our service valid?\n\t\tif (typeof (p.network) !== 'string' || !(p.network in _this.services)) {\n\t\t\t// Trigger the default login.\n\t\t\t// Ahh we dont have one.\n\t\t\treturn promise.reject(error('invalid_network', 'The provided network was not recognized'));\n\t\t}\n\n\t\tvar provider = _this.services[p.network];\n\n\t\t// Create a global listener to capture events triggered out of scope\n\t\tvar callbackId = utils.globalEvent(function(str) {\n\n\t\t\t// The responseHandler returns a string, lets save this locally\n\t\t\tvar obj;\n\n\t\t\tif (str) {\n\t\t\t\tobj = JSON.parse(str);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobj = error('cancelled', 'The authentication was not completed');\n\t\t\t}\n\n\t\t\t// Handle these response using the local\n\t\t\t// Trigger on the parent\n\t\t\tif (!obj.error) {\n\n\t\t\t\t// Save on the parent window the new credentials\n\t\t\t\t// This fixes an IE10 bug i think... atleast it does for me.\n\t\t\t\tutils.store(obj.network, obj);\n\n\t\t\t\t// Fulfill a successful login\n\t\t\t\tpromise.fulfill({\n\t\t\t\t\tnetwork: obj.network,\n\t\t\t\t\tauthResponse: obj\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Reject a successful login\n\t\t\t\tpromise.reject(obj);\n\t\t\t}\n\t\t});\n\n\t\tvar redirectUri = utils.url(opts.redirect_uri).href;\n\n\t\t// May be a space-delimited list of multiple, complementary types\n\t\tvar responseType = provider.oauth.response_type || opts.response_type;\n\n\t\t// Fallback to token if the module hasn't defined a grant url\n\t\tif (/\\bcode\\b/.test(responseType) && !provider.oauth.grant) {\n\t\t\tresponseType = responseType.replace(/\\bcode\\b/, 'token');\n\t\t}\n\n\t\t// Query string parameters, we may pass our own arguments to form the querystring\n\t\tp.qs = utils.merge(qs, {\n\t\t\tclient_id: encodeURIComponent(provider.id),\n\t\t\tresponse_type: encodeURIComponent(responseType),\n\t\t\tredirect_uri: encodeURIComponent(redirectUri),\n\t\t\tdisplay: opts.display,\n\t\t\tstate: {\n\t\t\t\tclient_id: provider.id,\n\t\t\t\tnetwork: p.network,\n\t\t\t\tdisplay: opts.display,\n\t\t\t\tcallback: callbackId,\n\t\t\t\tstate: opts.state,\n\t\t\t\tredirect_uri: redirectUri\n\t\t\t}\n\t\t});\n\n\t\t// Get current session for merging scopes, and for quick auth response\n\t\tvar session = utils.store(p.network);\n\n\t\t// Scopes (authentication permisions)\n\t\t// Ensure this is a string - IE has a problem moving Arrays between windows\n\t\t// Append the setup scope\n\t\tvar SCOPE_SPLIT = /[,\\s]+/;\n\n\t\t// Include default scope settings (cloned).\n\t\tvar scope = _this.settings.scope ? [_this.settings.scope.toString()] : [];\n\n\t\t// Extend the providers scope list with the default\n\t\tvar scopeMap = utils.merge(_this.settings.scope_map, provider.scope || {});\n\n\t\t// Add user defined scopes...\n\t\tif (opts.scope) {\n\t\t\tscope.push(opts.scope.toString());\n\t\t}\n\n\t\t// Append scopes from a previous session.\n\t\t// This helps keep app credentials constant,\n\t\t// Avoiding having to keep tabs on what scopes are authorized\n\t\tif (session && 'scope' in session && session.scope instanceof String) {\n\t\t\tscope.push(session.scope);\n\t\t}\n\n\t\t// Join and Split again\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Save the the scopes to the state with the names that they were requested with.\n\t\tp.qs.state.scope = scope.join(',');\n\n\t\t// Map scopes to the providers naming convention\n\t\tscope = scope.map(function(item) {\n\t\t\t// Does this have a mapping?\n\t\t\treturn (item in scopeMap) ? scopeMap[item] : item;\n\t\t});\n\n\t\t// Stringify and Arrayify so that double mapped scopes are given the chance to be formatted\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Again...\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Join with the expected scope delimiter into a string\n\t\tp.qs.scope = scope.join(provider.scope_delim || ',');\n\n\t\t// Is the user already signed in with the appropriate scopes, valid access_token?\n\t\tif (opts.force === false) {\n\n\t\t\tif (session && 'access_token' in session && session.access_token && 'expires' in session && session.expires > ((new Date()).getTime() / 1e3)) {\n\t\t\t\t// What is different about the scopes in the session vs the scopes in the new login?\n\t\t\t\tvar diff = utils.diff((session.scope || '').split(SCOPE_SPLIT), (p.qs.state.scope || '').split(SCOPE_SPLIT));\n\t\t\t\tif (diff.length === 0) {\n\n\t\t\t\t\t// OK trigger the callback\n\t\t\t\t\tpromise.fulfill({\n\t\t\t\t\t\tunchanged: true,\n\t\t\t\t\t\tnetwork: p.network,\n\t\t\t\t\t\tauthResponse: session\n\t\t\t\t\t});\n\n\t\t\t\t\t// Nothing has changed\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Page URL\n\t\tif (opts.display === 'page' && opts.page_uri) {\n\t\t\t// Add a page location, place to endup after session has authenticated\n\t\t\tp.qs.state.page_uri = utils.url(opts.page_uri).href;\n\t\t}\n\n\t\t// Bespoke\n\t\t// Override login querystrings from auth_options\n\t\tif ('login' in provider && typeof (provider.login) === 'function') {\n\t\t\t// Format the paramaters according to the providers formatting function\n\t\t\tprovider.login(p);\n\t\t}\n\n\t\t// Add OAuth to state\n\t\t// Where the service is going to take advantage of the oauth_proxy\n\t\tif (!/\\btoken\\b/.test(responseType) ||\n\t\tparseInt(provider.oauth.version, 10) < 2 ||\n\t\t(opts.display === 'none' && provider.oauth.grant && session && session.refresh_token)) {\n\n\t\t\t// Add the oauth endpoints\n\t\t\tp.qs.state.oauth = provider.oauth;\n\n\t\t\t// Add the proxy url\n\t\t\tp.qs.state.oauth_proxy = opts.oauth_proxy;\n\n\t\t}\n\n\t\t// Convert state to a string\n\t\tp.qs.state = encodeURIComponent(JSON.stringify(p.qs.state));\n\n\t\t// URL\n\t\tif (parseInt(provider.oauth.version, 10) === 1) {\n\n\t\t\t// Turn the request to the OAuth Proxy for 3-legged auth\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Refresh token\n\t\telse if (opts.display === 'none' && provider.oauth.grant && session && session.refresh_token) {\n\n\t\t\t// Add the refresh_token to the request\n\t\t\tp.qs.refresh_token = session.refresh_token;\n\n\t\t\t// Define the request path\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\t\telse {\n\t\t\turl = utils.qs(provider.oauth.auth, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Broadcast this event as an auth:init\n\t\temit('auth.init', p);\n\n\t\t// Execute\n\t\t// Trigger how we want self displayed\n\t\tif (opts.display === 'none') {\n\t\t\t// Sign-in in the background, iframe\n\t\t\tutils.iframe(url, redirectUri);\n\t\t}\n\n\t\t// Triggering popup?\n\t\telse if (opts.display === 'popup') {\n\n\t\t\tvar popup = utils.popup(url, redirectUri, opts.popup);\n\n\t\t\tvar timer = setInterval(function() {\n\t\t\t\tif (!popup || popup.closed) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (!promise.state) {\n\n\t\t\t\t\t\tvar response = error('cancelled', 'Login has been cancelled');\n\n\t\t\t\t\t\tif (!popup) {\n\t\t\t\t\t\t\tresponse = error('blocked', 'Popup was blocked');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresponse.network = p.network;\n\n\t\t\t\t\t\tpromise.reject(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\telse {\n\t\t\twindow.location = url;\n\t\t}\n\n\t\treturn promise.proxy;\n\n\t\tfunction encodeFunction(s) {return s;}\n\n\t\tfunction filterEmpty(s) {return !!s;}\n\t},\n\n\t// Remove any data associated with a given service\n\t// @param string name of the service\n\t// @param function callback\n\tlogout: function() {\n\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\n\t\t// Create a new promise\n\t\tvar promise = utils.Promise();\n\n\t\tvar p = utils.args({name:'s', options: 'o', callback: 'f'}, arguments);\n\n\t\tp.options = p.options || {};\n\n\t\t// Add callback to events\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.logout auth'), emit.bind(this, 'error'));\n\n\t\t// Network\n\t\tp.name = p.name || this.settings.default_service;\n\t\tp.authResponse = utils.store(p.name);\n\n\t\tif (p.name && !(p.name in _this.services)) {\n\n\t\t\tpromise.reject(error('invalid_network', 'The network was unrecognized'));\n\n\t\t}\n\t\telse if (p.name && p.authResponse) {\n\n\t\t\t// Define the callback\n\t\t\tvar callback = function(opts) {\n\n\t\t\t\t// Remove from the store\n\t\t\t\tutils.store(p.name, null);\n\n\t\t\t\t// Emit events by default\n\t\t\t\tpromise.fulfill(hello.utils.merge({network:p.name}, opts || {}));\n\t\t\t};\n\n\t\t\t// Run an async operation to remove the users session\n\t\t\tvar _opts = {};\n\t\t\tif (p.options.force) {\n\t\t\t\tvar logout = _this.services[p.name].logout;\n\t\t\t\tif (logout) {\n\t\t\t\t\t// Convert logout to URL string,\n\t\t\t\t\t// If no string is returned, then this function will handle the logout async style\n\t\t\t\t\tif (typeof (logout) === 'function') {\n\t\t\t\t\t\tlogout = logout(callback, p);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If logout is a string then assume URL and open in iframe.\n\t\t\t\t\tif (typeof (logout) === 'string') {\n\t\t\t\t\t\tutils.iframe(logout);\n\t\t\t\t\t\t_opts.force = null;\n\t\t\t\t\t\t_opts.message = 'Logout success on providers site was indeterminate';\n\t\t\t\t\t}\n\t\t\t\t\telse if (logout === undefined) {\n\t\t\t\t\t\t// The callback function will handle the response.\n\t\t\t\t\t\treturn promise.proxy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove local credentials\n\t\t\tcallback(_opts);\n\t\t}\n\t\telse {\n\t\t\tpromise.reject(error('invalid_session', 'There was no session to remove'));\n\t\t}\n\n\t\treturn promise.proxy;\n\t},\n\n\t// Returns all the sessions that are subscribed too\n\t// @param string optional, name of the service to get information about.\n\tgetAuthResponse: function(service) {\n\n\t\t// If the service doesn't exist\n\t\tservice = service || this.settings.default_service;\n\n\t\tif (!service || !(service in this.services)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.utils.store(service) || null;\n\t},\n\n\t// Events: placeholder for the events\n\tevents: {}\n});\n\n// Core utilities\nhello.utils.extend(hello.utils, {\n\n\t// Error\n\terror: function(code, message) {\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tcode: code,\n\t\t\t\tmessage: message\n\t\t\t}\n\t\t};\n\t},\n\n\t// Append the querystring to a url\n\t// @param string url\n\t// @param object parameters\n\tqs: function(url, params, formatFunction) {\n\n\t\tif (params) {\n\n\t\t\t// Set default formatting function\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\t// Override the items in the URL which already exist\n\t\t\tfor (var x in params) {\n\t\t\t\tvar str = '([\\\\?\\\\&])' + x + '=[^\\\\&]*';\n\t\t\t\tvar reg = new RegExp(str);\n\t\t\t\tif (url.match(reg)) {\n\t\t\t\t\turl = url.replace(reg, '$1' + x + '=' + formatFunction(params[x]));\n\t\t\t\t\tdelete params[x];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEmpty(params)) {\n\t\t\treturn url + (url.indexOf('?') > -1 ? '&' : '?') + this.param(params, formatFunction);\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t// Param\n\t// Explode/encode the parameters of an URL string/object\n\t// @param string s, string to decode\n\tparam: function(s, formatFunction) {\n\t\tvar b;\n\t\tvar a = {};\n\t\tvar m;\n\n\t\tif (typeof (s) === 'string') {\n\n\t\t\tformatFunction = formatFunction || decodeURIComponent;\n\n\t\t\tm = s.replace(/^[\\#\\?]/, '').match(/([^=\\/\\&]+)=([^\\&]+)/g);\n\t\t\tif (m) {\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\tb = m[i].match(/([^=]+)=(.*)/);\n\t\t\t\t\ta[b[1]] = formatFunction(b[2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\t\telse {\n\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\tvar o = s;\n\n\t\t\ta = [];\n\n\t\t\tfor (var x in o) {if (o.hasOwnProperty(x)) {\n\t\t\t\tif (o.hasOwnProperty(x)) {\n\t\t\t\t\ta.push([x, o[x] === '?' ? '?' : formatFunction(o[x])].join('='));\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\treturn a.join('&');\n\t\t}\n\t},\n\n\t// Local storage facade\n\tstore: (function() {\n\n\t\tvar a = ['localStorage', 'sessionStorage'];\n\t\tvar i = -1;\n\t\tvar prefix = 'test';\n\n\t\t// Set LocalStorage\n\t\tvar localStorage;\n\n\t\twhile (a[++i]) {\n\t\t\ttry {\n\t\t\t\t// In Chrome with cookies blocked, calling localStorage throws an error\n\t\t\t\tlocalStorage = window[a[i]];\n\t\t\t\tlocalStorage.setItem(prefix + i, i);\n\t\t\t\tlocalStorage.removeItem(prefix + i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tlocalStorage = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!localStorage) {\n\n\t\t\tvar cache = null;\n\n\t\t\tlocalStorage = {\n\t\t\t\tgetItem: function(prop) {\n\t\t\t\t\tprop = prop + '=';\n\t\t\t\t\tvar m = document.cookie.split(';');\n\t\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\t\tvar _m = m[i].replace(/(^\\s+|\\s+$)/, '');\n\t\t\t\t\t\tif (_m && _m.indexOf(prop) === 0) {\n\t\t\t\t\t\t\treturn _m.substr(prop.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn cache;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(prop, value) {\n\t\t\t\t\tcache = value;\n\t\t\t\t\tdocument.cookie = prop + '=' + value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Fill the cache up\n\t\t\tcache = localStorage.getItem('hello');\n\t\t}\n\n\t\tfunction get() {\n\t\t\tvar json = {};\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(localStorage.getItem('hello')) || {};\n\t\t\t}\n\t\t\tcatch (e) {}\n\n\t\t\treturn json;\n\t\t}\n\n\t\tfunction set(json) {\n\t\t\tlocalStorage.setItem('hello', JSON.stringify(json));\n\t\t}\n\n\t\t// Check if the browser support local storage\n\t\treturn function(name, value, days) {\n\n\t\t\t// Local storage\n\t\t\tvar json = get();\n\n\t\t\tif (name && value === undefined) {\n\t\t\t\treturn json[name] || null;\n\t\t\t}\n\t\t\telse if (name && value === null) {\n\t\t\t\ttry {\n\t\t\t\t\tdelete json[name];\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tjson[name] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (name) {\n\t\t\t\tjson[name] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn json;\n\t\t\t}\n\n\t\t\tset(json);\n\n\t\t\treturn json || null;\n\t\t};\n\n\t})(),\n\n\t// Create and Append new DOM elements\n\t// @param node string\n\t// @param attr object literal\n\t// @param dom/string\n\tappend: function(node, attr, target) {\n\n\t\tvar n = typeof (node) === 'string' ? document.createElement(node) : node;\n\n\t\tif (typeof (attr) === 'object') {\n\t\t\tif ('tagName' in attr) {\n\t\t\t\ttarget = attr;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var x in attr) {if (attr.hasOwnProperty(x)) {\n\t\t\t\t\tif (typeof (attr[x]) === 'object') {\n\t\t\t\t\t\tfor (var y in attr[x]) {if (attr[x].hasOwnProperty(y)) {\n\t\t\t\t\t\t\tn[x][y] = attr[x][y];\n\t\t\t\t\t\t}}\n\t\t\t\t\t}\n\t\t\t\t\telse if (x === 'html') {\n\t\t\t\t\t\tn.innerHTML = attr[x];\n\t\t\t\t\t}\n\n\t\t\t\t\t// IE doesn't like us setting methods with setAttribute\n\t\t\t\t\telse if (!/^on/.test(x)) {\n\t\t\t\t\t\tn.setAttribute(x, attr[x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tn[x] = attr[x];\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t}\n\t\t}\n\n\t\tif (target === 'body') {\n\t\t\t(function self() {\n\t\t\t\tif (document.body) {\n\t\t\t\t\tdocument.body.appendChild(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetTimeout(self, 16);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t\telse if (typeof (target) === 'object') {\n\t\t\ttarget.appendChild(n);\n\t\t}\n\t\telse if (typeof (target) === 'string') {\n\t\t\tdocument.getElementsByTagName(target)[0].appendChild(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// An easy way to create a hidden iframe\n\t// @param string src\n\tiframe: function(src) {\n\t\tthis.append('iframe', {src: src, style: {position:'absolute', left: '-1000px', bottom: 0, height: '1px', width: '1px'}}, 'body');\n\t},\n\n\t// Recursive merge two objects into one, second parameter overides the first\n\t// @param a array\n\tmerge: function(/* Args: a, b, c, .. n */) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift({});\n\t\treturn this.extend.apply(null, args);\n\t},\n\n\t// Makes it easier to assign parameters, where some are optional\n\t// @param o object\n\t// @param a arguments\n\targs: function(o, args) {\n\n\t\tvar p = {};\n\t\tvar i = 0;\n\t\tvar t = null;\n\t\tvar x = null;\n\n\t\t// 'x' is the first key in the list of object parameters\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\t\t\tbreak;\n\t\t}}\n\n\t\t// Passing in hash object of arguments?\n\t\t// Where the first argument can't be an object\n\t\tif ((args.length === 1) && (typeof (args[0]) === 'object') && o[x] != 'o!') {\n\n\t\t\t// Could this object still belong to a property?\n\t\t\t// Check the object keys if they match any of the property keys\n\t\t\tfor (x in args[0]) {if (o.hasOwnProperty(x)) {\n\t\t\t\t// Does this key exist in the property list?\n\t\t\t\tif (x in o) {\n\t\t\t\t\t// Yes this key does exist so its most likely this function has been invoked with an object parameter\n\t\t\t\t\t// Return first argument as the hash of all arguments\n\t\t\t\t\treturn args[0];\n\t\t\t\t}\n\t\t\t}}\n\t\t}\n\n\t\t// Else loop through and account for the missing ones.\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\n\t\t\tt = typeof (args[i]);\n\n\t\t\tif ((typeof (o[x]) === 'function' && o[x].test(args[i])) || (typeof (o[x]) === 'string' && (\n\t\t\t(o[x].indexOf('s') > -1 && t === 'string') ||\n\t\t\t(o[x].indexOf('o') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('i') > -1 && t === 'number') ||\n\t\t\t(o[x].indexOf('a') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('f') > -1 && t === 'function')\n\t\t\t))\n\t\t\t) {\n\t\t\t\tp[x] = args[i++];\n\t\t\t}\n\n\t\t\telse if (typeof (o[x]) === 'string' && o[x].indexOf('!') > -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}}\n\n\t\treturn p;\n\t},\n\n\t// Returns a URL instance\n\turl: function(path) {\n\n\t\t// If the path is empty\n\t\tif (!path) {\n\t\t\treturn window.location;\n\t\t}\n\n\t\t// Chrome and FireFox support new URL() to extract URL objects\n\t\telse if (window.URL && URL instanceof Function && URL.length !== 0) {\n\t\t\treturn new URL(path, window.location);\n\t\t}\n\n\t\t// Ugly shim, it works!\n\t\telse {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = path;\n\t\t\treturn a.cloneNode(false);\n\t\t}\n\t},\n\n\tdiff: function(a, b) {\n\t\treturn b.filter(function(item) {\n\t\t\treturn a.indexOf(item) === -1;\n\t\t});\n\t},\n\n\t// Get the different hash of properties unique to `a`, and not in `b`\n\tdiffKey: function(a, b) {\n\t\tif (a || !b) {\n\t\t\tvar r = {};\n\t\t\tfor (var x in a) {\n\t\t\t\t// Does the property not exist?\n\t\t\t\tif (!(x in b)) {\n\t\t\t\t\tr[x] = a[x];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\n\t\treturn a;\n\t},\n\n\t// Unique\n\t// Remove duplicate and null values from an array\n\t// @param a array\n\tunique: function(a) {\n\t\tif (!Array.isArray(a)) { return []; }\n\n\t\treturn a.filter(function(item, index) {\n\t\t\t// Is this the first location of item\n\t\t\treturn a.indexOf(item) === index;\n\t\t});\n\t},\n\n\tisEmpty: function(obj) {\n\n\t\t// Scalar\n\t\tif (!obj)\n\t\t\treturn true;\n\n\t\t// Array\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn !obj.length;\n\t\t}\n\t\telse if (typeof (obj) === 'object') {\n\t\t\t// Object\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t//jscs:disable\n\n\t/*!\n\t **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable\n\t **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>\n\t **  Licensed under The MIT License <http://opensource.org/licenses/MIT>\n\t **  Source-Code distributed on <http://github.com/rse/thenable>\n\t */\n\tPromise: (function(){\n\t\t/*  promise states [Promises/A+ 2.1]  */\n\t\tvar STATE_PENDING   = 0;                                         /*  [Promises/A+ 2.1.1]  */\n\t\tvar STATE_FULFILLED = 1;                                         /*  [Promises/A+ 2.1.2]  */\n\t\tvar STATE_REJECTED  = 2;                                         /*  [Promises/A+ 2.1.3]  */\n\n\t\t/*  promise object constructor  */\n\t\tvar api = function (executor) {\n\t\t\t/*  optionally support non-constructor/plain-function call  */\n\t\t\tif (!(this instanceof api))\n\t\t\t\treturn new api(executor);\n\n\t\t\t/*  initialize object  */\n\t\t\tthis.id           = \"Thenable/1.0.6\";\n\t\t\tthis.state        = STATE_PENDING; /*  initial state  */\n\t\t\tthis.fulfillValue = undefined;     /*  initial value  */     /*  [Promises/A+ 1.3, 2.1.2.2]  */\n\t\t\tthis.rejectReason = undefined;     /*  initial reason */     /*  [Promises/A+ 1.5, 2.1.3.2]  */\n\t\t\tthis.onFulfilled  = [];            /*  initial handlers  */\n\t\t\tthis.onRejected   = [];            /*  initial handlers  */\n\n\t\t\t/*  provide optional information-hiding proxy  */\n\t\t\tthis.proxy = {\n\t\t\t\tthen: this.then.bind(this)\n\t\t\t};\n\n\t\t\t/*  support optional executor function  */\n\t\t\tif (typeof executor === \"function\")\n\t\t\t\texecutor.call(this, this.fulfill.bind(this), this.reject.bind(this));\n\t\t};\n\n\t\t/*  promise API methods  */\n\t\tapi.prototype = {\n\t\t\t/*  promise resolving methods  */\n\t\t\tfulfill: function (value) { return deliver(this, STATE_FULFILLED, \"fulfillValue\", value); },\n\t\t\treject:  function (value) { return deliver(this, STATE_REJECTED,  \"rejectReason\", value); },\n\n\t\t\t/*  \"The then Method\" [Promises/A+ 1.1, 1.2, 2.2]  */\n\t\t\tthen: function (onFulfilled, onRejected) {\n\t\t\t\tvar curr = this;\n\t\t\t\tvar next = new api();                                    /*  [Promises/A+ 2.2.7]  */\n\t\t\t\tcurr.onFulfilled.push(\n\t\t\t\t\tresolver(onFulfilled, next, \"fulfill\"));             /*  [Promises/A+ 2.2.2/2.2.6]  */\n\t\t\t\tcurr.onRejected.push(\n\t\t\t\t\tresolver(onRejected,  next, \"reject\" ));             /*  [Promises/A+ 2.2.3/2.2.6]  */\n\t\t\t\texecute(curr);\n\t\t\t\treturn next.proxy;                                       /*  [Promises/A+ 2.2.7, 3.3]  */\n\t\t\t}\n\t\t};\n\n\t\t/*  deliver an action  */\n\t\tvar deliver = function (curr, state, name, value) {\n\t\t\tif (curr.state === STATE_PENDING) {\n\t\t\t\tcurr.state = state;                                      /*  [Promises/A+ 2.1.2.1, 2.1.3.1]  */\n\t\t\t\tcurr[name] = value;                                      /*  [Promises/A+ 2.1.2.2, 2.1.3.2]  */\n\t\t\t\texecute(curr);\n\t\t\t}\n\t\t\treturn curr;\n\t\t};\n\n\t\t/*  execute all handlers  */\n\t\tvar execute = function (curr) {\n\t\t\tif (curr.state === STATE_FULFILLED)\n\t\t\t\texecute_handlers(curr, \"onFulfilled\", curr.fulfillValue);\n\t\t\telse if (curr.state === STATE_REJECTED)\n\t\t\t\texecute_handlers(curr, \"onRejected\",  curr.rejectReason);\n\t\t};\n\n\t\t/*  execute particular set of handlers  */\n\t\tvar execute_handlers = function (curr, name, value) {\n\t\t\t/* global process: true */\n\t\t\t/* global setImmediate: true */\n\t\t\t/* global setTimeout: true */\n\n\t\t\t/*  short-circuit processing  */\n\t\t\tif (curr[name].length === 0)\n\t\t\t\treturn;\n\n\t\t\t/*  iterate over all handlers, exactly once  */\n\t\t\tvar handlers = curr[name];\n\t\t\tcurr[name] = [];                                             /*  [Promises/A+ 2.2.2.3, 2.2.3.3]  */\n\t\t\tvar func = function () {\n\t\t\t\tfor (var i = 0; i < handlers.length; i++)\n\t\t\t\t\thandlers[i](value);                                  /*  [Promises/A+ 2.2.5]  */\n\t\t\t};\n\n\t\t\t/*  execute procedure asynchronously  */                     /*  [Promises/A+ 2.2.4, 3.1]  */\n\t\t\tif (typeof process === \"object\" && typeof process.nextTick === \"function\")\n\t\t\t\tprocess.nextTick(func);\n\t\t\telse if (typeof setImmediate === \"function\")\n\t\t\t\tsetImmediate(func);\n\t\t\telse\n\t\t\t\tsetTimeout(func, 0);\n\t\t};\n\n\t\t/*  generate a resolver function  */\n\t\tvar resolver = function (cb, next, method) {\n\t\t\treturn function (value) {\n\t\t\t\tif (typeof cb !== \"function\")                            /*  [Promises/A+ 2.2.1, 2.2.7.3, 2.2.7.4]  */\n\t\t\t\t\tnext[method].call(next, value);                      /*  [Promises/A+ 2.2.7.3, 2.2.7.4]  */\n\t\t\t\telse {\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry { result = cb(value); }                          /*  [Promises/A+ 2.2.2.1, 2.2.3.1, 2.2.5, 3.2]  */\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tnext.reject(e);                                  /*  [Promises/A+ 2.2.7.2]  */\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(next, result);                               /*  [Promises/A+ 2.2.7.1]  */\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\t/*  \"Promise Resolution Procedure\"  */                           /*  [Promises/A+ 2.3]  */\n\t\tvar resolve = function (promise, x) {\n\t\t\t/*  sanity check arguments  */                               /*  [Promises/A+ 2.3.1]  */\n\t\t\tif (promise === x || promise.proxy === x) {\n\t\t\t\tpromise.reject(new TypeError(\"cannot resolve promise with itself\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  surgically check for a \"then\" method\n\t\t\t\t(mainly to just call the \"getter\" of \"then\" only once)  */\n\t\t\tvar then;\n\t\t\tif ((typeof x === \"object\" && x !== null) || typeof x === \"function\") {\n\t\t\t\ttry { then = x.then; }                                   /*  [Promises/A+ 2.3.3.1, 3.5]  */\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);                                   /*  [Promises/A+ 2.3.3.2]  */\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*  handle own Thenables    [Promises/A+ 2.3.2]\n\t\t\t\tand similar \"thenables\" [Promises/A+ 2.3.3]  */\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\tvar resolved = false;\n\t\t\t\ttry {\n\t\t\t\t\t/*  call retrieved \"then\" method */                  /*  [Promises/A+ 2.3.3.3]  */\n\t\t\t\t\tthen.call(x,\n\t\t\t\t\t\t/*  resolvePromise  */                           /*  [Promises/A+ 2.3.3.3.1]  */\n\t\t\t\t\t\tfunction (y) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tif (y === x)                                 /*  [Promises/A+ 3.6]  */\n\t\t\t\t\t\t\t\tpromise.reject(new TypeError(\"circular thenable chain\"));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(promise, y);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t/*  rejectPromise  */                            /*  [Promises/A+ 2.3.3.3.2]  */\n\t\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tpromise.reject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!resolved)                                       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\tpromise.reject(e);                               /*  [Promises/A+ 2.3.3.3.4]  */\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  handle other values  */\n\t\t\tpromise.fulfill(x);                                          /*  [Promises/A+ 2.3.4, 2.3.3.4]  */\n\t\t};\n\n\t\t/*  export API  */\n\t\treturn api;\n\t})(),\n\n\t//jscs:enable\n\n\t// Event\n\t// A contructor superclass for adding event menthods, on, off, emit.\n\tEvent: function() {\n\n\t\tvar separator = /[\\s\\,]+/;\n\n\t\t// If this doesn't support getPrototype then we can't get prototype.events of the parent\n\t\t// So lets get the current instance events, and add those to a parent property\n\t\tthis.parent = {\n\t\t\tevents: this.events,\n\t\t\tfindEvents: this.findEvents,\n\t\t\tparent: this.parent,\n\t\t\tutils: this.utils\n\t\t};\n\n\t\tthis.events = {};\n\n\t\t// On, subscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.on = function(evt, callback) {\n\n\t\t\tif (callback && typeof (callback) === 'function') {\n\t\t\t\tvar a = evt.split(separator);\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\n\n\t\t\t\t\t// Has this event already been fired on this instance?\n\t\t\t\t\tthis.events[a[i]] = [callback].concat(this.events[a[i]] || []);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Off, unsubscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.off = function(evt, callback) {\n\n\t\t\tthis.findEvents(evt, function(name, index) {\n\t\t\t\tif (!callback || this.events[name][index] === callback) {\n\t\t\t\t\tthis.events[name][index] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Emit\n\t\t// Triggers any subscribed events\n\t\tthis.emit = function(evt /*, data, ... */) {\n\n\t\t\t// Get arguments as an Array, knock off the first one\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\targs.push(evt);\n\n\t\t\t// Handler\n\t\t\tvar handler = function(name, index) {\n\n\t\t\t\t// Replace the last property with the event name\n\t\t\t\targs[args.length - 1] = (name === '*' ? evt : name);\n\n\t\t\t\t// Trigger\n\t\t\t\tthis.events[name][index].apply(this, args);\n\t\t\t};\n\n\t\t\t// Find the callbacks which match the condition and call\n\t\t\tvar _this = this;\n\t\t\twhile (_this && _this.findEvents) {\n\n\t\t\t\t// Find events which match\n\t\t\t\t_this.findEvents(evt + ',*', handler);\n\t\t\t\t_this = _this.parent;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t//\n\t\t// Easy functions\n\t\tthis.emitAfter = function() {\n\t\t\tvar _this = this;\n\t\t\tvar args = arguments;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.emit.apply(_this, args);\n\t\t\t}, 0);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.findEvents = function(evt, callback) {\n\n\t\t\tvar a = evt.split(separator);\n\n\t\t\tfor (var name in this.events) {if (this.events.hasOwnProperty(name)) {\n\n\t\t\t\tif (a.indexOf(name) > -1) {\n\n\t\t\t\t\tfor (var i = 0; i < this.events[name].length; i++) {\n\n\t\t\t\t\t\t// Does the event handler exist?\n\t\t\t\t\t\tif (this.events[name][i]) {\n\t\t\t\t\t\t\t// Emit on the local instance of this\n\t\t\t\t\t\t\tcallback.call(this, name, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t};\n\n\t\treturn this;\n\t},\n\n\t// Global Events\n\t// Attach the callback to the window object\n\t// Return its unique reference\n\tglobalEvent: function(callback, guid) {\n\t\t// If the guid has not been supplied then create a new one.\n\t\tguid = guid || '_hellojs_' + parseInt(Math.random() * 1e12, 10).toString(36);\n\n\t\t// Define the callback function\n\t\twindow[guid] = function() {\n\t\t\t// Trigger the callback\n\t\t\ttry {\n\t\t\t\tif (callback.apply(this, arguments)) {\n\t\t\t\t\tdelete window[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\treturn guid;\n\t},\n\n\t// Trigger a clientside popup\n\t// This has been augmented to support PhoneGap\n\tpopup: function(url, redirectUri, options) {\n\n\t\tvar documentElement = document.documentElement;\n\n\t\t// Multi Screen Popup Positioning (http://stackoverflow.com/a/16861050)\n\t\t// Credit: http://www.xtf.dk/2011/08/center-new-popup-window-even-on.html\n\t\t// Fixes dual-screen position                         Most browsers      Firefox\n\n\t\tif (options.height) {\n\t\t\tvar dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top;\n\t\t\tvar height = screen.height || window.innerHeight || documentElement.clientHeight;\n\t\t\toptions.top = parseInt((height - options.height) / 2, 10) + dualScreenTop;\n\t\t}\n\n\t\tif (options.width) {\n\t\t\tvar dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;\n\t\t\tvar width = screen.width || window.innerWidth || documentElement.clientWidth;\n\t\t\toptions.left = parseInt((width - options.width) / 2, 10) + dualScreenLeft;\n\t\t}\n\n\t\t// Convert options into an array\n\t\tvar optionsArray = [];\n\t\tObject.keys(options).forEach(function(name) {\n\t\t\tvar value = options[name];\n\t\t\toptionsArray.push(name + (value !== null ? '=' + value : ''));\n\t\t});\n\n\t\t// Call the open() function with the initial path\n\t\t//\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\t//\n\t\t// Firefox  decodes URL fragments when calling location.hash.\n\t\t//  - This is bad if the value contains break points which are escaped\n\t\t//  - Hence the url must be encoded twice as it contains breakpoints.\n\t\tif (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n\t\t\turl = redirectUri + '#oauth_redirect=' + encodeURIComponent(encodeURIComponent(url));\n\t\t}\n\n\t\tvar popup = window.open(\n\t\t\turl,\n\t\t\t'_blank',\n\t\t\toptionsArray.join(',')\n\t\t);\n\n\t\tif (popup && popup.focus) {\n\t\t\tpopup.focus();\n\t\t}\n\n\t\treturn popup;\n\t},\n\n\t// OAuth and API response handler\n\tresponseHandler: function(window, parent) {\n\n\t\tvar _this = this;\n\t\tvar p;\n\t\tvar location = window.location;\n\n\t\t// Is this an auth relay message which needs to call the proxy?\n\t\tp = _this.param(location.search);\n\n\t\t// OAuth2 or OAuth1 server response?\n\t\tif (p && p.state && (p.code || p.oauth_token)) {\n\n\t\t\tvar state = JSON.parse(p.state);\n\n\t\t\t// Add this path as the redirect_uri\n\t\t\tp.redirect_uri = state.redirect_uri || location.href.replace(/[\\?\\#].*$/, '');\n\n\t\t\t// Redirect to the host\n\t\t\tvar path = state.oauth_proxy + '?' + _this.param(p);\n\n\t\t\tlocation.assign(path);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Save session, from redirected authentication\n\t\t// #access_token has come in?\n\t\t//\n\t\t// FACEBOOK is returning auth errors within as a query_string... thats a stickler for consistency.\n\t\t// SoundCloud is the state in the querystring and the token in the hashtag, so we'll mix the two together\n\n\t\tp = _this.merge(_this.param(location.search || ''), _this.param(location.hash || ''));\n\n\t\t// If p.state\n\t\tif (p && 'state' in p) {\n\n\t\t\t// Remove any addition information\n\t\t\t// E.g. p.state = 'facebook.page';\n\t\t\ttry {\n\t\t\t\tvar a = JSON.parse(p.state);\n\t\t\t\t_this.extend(p, a);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error('Could not decode state parameter');\n\t\t\t}\n\n\t\t\t// Access_token?\n\t\t\tif (('access_token' in p && p.access_token) && p.network) {\n\n\t\t\t\tif (!p.expires_in || parseInt(p.expires_in, 10) === 0) {\n\t\t\t\t\t// If p.expires_in is unset, set to 0\n\t\t\t\t\tp.expires_in = 0;\n\t\t\t\t}\n\n\t\t\t\tp.expires_in = parseInt(p.expires_in, 10);\n\t\t\t\tp.expires = ((new Date()).getTime() / 1e3) + (p.expires_in || (60 * 60 * 24 * 365));\n\n\t\t\t\t// Lets use the \"state\" to assign it to one of our networks\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// Error=?\n\t\t\t// &error_description=?\n\t\t\t// &state=?\n\t\t\telse if (('error' in p && p.error) && p.network) {\n\n\t\t\t\tp.error = {\n\t\t\t\t\tcode: p.error,\n\t\t\t\t\tmessage: p.error_message || p.error_description\n\t\t\t\t};\n\n\t\t\t\t// Let the state handler handle it\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// API call, or a cancelled login\n\t\t\t// Result is serialized JSON string\n\t\t\telse if (p.callback && p.callback in parent) {\n\n\t\t\t\t// Trigger a function in the parent\n\t\t\t\tvar res = 'result' in p && p.result ? JSON.parse(p.result) : false;\n\n\t\t\t\t// Trigger the callback on the parent\n\t\t\t\tparent[p.callback](res);\n\t\t\t\tcloseWindow();\n\t\t\t}\n\n\t\t\t// If this page is still open\n\t\t\tif (p.page_uri) {\n\t\t\t\tlocation.assign(p.page_uri);\n\t\t\t}\n\t\t}\n\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\telse if ('oauth_redirect' in p) {\n\n\t\t\tlocation.assign(decodeURIComponent(p.oauth_redirect));\n\t\t\treturn;\n\t\t}\n\n\t\t// Trigger a callback to authenticate\n\t\tfunction authCallback(obj, window, parent) {\n\n\t\t\tvar cb = obj.callback;\n\t\t\tvar network = obj.network;\n\n\t\t\t// Trigger the callback on the parent\n\t\t\t_this.store(network, obj);\n\n\t\t\t// If this is a page request it has no parent or opener window to handle callbacks\n\t\t\tif (('display' in obj) && obj.display === 'page') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove from session object\n\t\t\tif (parent && cb && cb in parent) {\n\n\t\t\t\ttry {\n\t\t\t\t\tdelete obj.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t_this.store(network, obj);\n\n\t\t\t\t// Call the globalEvent function on the parent\n\t\t\t\t// It's safer to pass back a string to the parent,\n\t\t\t\t// Rather than an object/array (better for IE8)\n\t\t\t\tvar str = JSON.stringify(obj);\n\n\t\t\t\ttry {\n\t\t\t\t\tparent[cb](str);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Error thrown whilst executing parent callback\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloseWindow();\n\t\t}\n\n\t\tfunction closeWindow() {\n\n\t\t\tif (window.frameElement) {\n\t\t\t\t// Inside an iframe, remove from parent\n\t\t\t\tparent.document.body.removeChild(window.frameElement);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close this current window\n\t\t\t\ttry {\n\t\t\t\t\twindow.close();\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// IOS bug wont let us close a popup if still loading\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\t\twindow.close();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n});\n\n// Events\n// Extend the hello object with its own event instance\nhello.utils.Event.call(hello);\n\n///////////////////////////////////\n// Monitoring session state\n// Check for session changes\n///////////////////////////////////\n\n(function(hello) {\n\n\t// Monitor for a change in state and fire\n\tvar oldSessions = {};\n\n\t// Hash of expired tokens\n\tvar expired = {};\n\n\t// Listen to other triggers to Auth events, use these to update this\n\thello.on('auth.login, auth.logout', function(auth) {\n\t\tif (auth && typeof (auth) === 'object' && auth.network) {\n\t\t\toldSessions[auth.network] = hello.utils.store(auth.network) || {};\n\t\t}\n\t});\n\n\t(function self() {\n\n\t\tvar CURRENT_TIME = ((new Date()).getTime() / 1e3);\n\t\tvar emit = function(eventName) {\n\t\t\thello.emit('auth.' + eventName, {\n\t\t\t\tnetwork: name,\n\t\t\t\tauthResponse: session\n\t\t\t});\n\t\t};\n\n\t\t// Loop through the services\n\t\tfor (var name in hello.services) {if (hello.services.hasOwnProperty(name)) {\n\n\t\t\tif (!hello.services[name].id) {\n\t\t\t\t// We haven't attached an ID so dont listen.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get session\n\t\t\tvar session = hello.utils.store(name) || {};\n\t\t\tvar provider = hello.services[name];\n\t\t\tvar oldSess = oldSessions[name] || {};\n\n\t\t\t// Listen for globalEvents that did not get triggered from the child\n\t\t\tif (session && 'callback' in session) {\n\n\t\t\t\t// To do remove from session object...\n\t\t\t\tvar cb = session.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete session.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t// Removing the callback\n\t\t\t\thello.utils.store(name, session);\n\n\t\t\t\t// Emit global events\n\t\t\t\ttry {\n\t\t\t\t\twindow[cb](session);\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\n\t\t\t// Refresh token\n\t\t\tif (session && ('expires' in session) && session.expires < CURRENT_TIME) {\n\n\t\t\t\t// If auto refresh is possible\n\t\t\t\t// Either the browser supports\n\t\t\t\tvar refresh = provider.refresh || session.refresh_token;\n\n\t\t\t\t// Has the refresh been run recently?\n\t\t\t\tif (refresh && (!(name in expired) || expired[name] < CURRENT_TIME)) {\n\t\t\t\t\t// Try to resignin\n\t\t\t\t\thello.emit('notice', name + ' has expired trying to resignin');\n\t\t\t\t\thello.login(name, {display: 'none', force: false});\n\n\t\t\t\t\t// Update expired, every 10 minutes\n\t\t\t\t\texpired[name] = CURRENT_TIME + 600;\n\t\t\t\t}\n\n\t\t\t\t// Does this provider not support refresh\n\t\t\t\telse if (!refresh && !(name in expired)) {\n\t\t\t\t\t// Label the event\n\t\t\t\t\temit('expired');\n\t\t\t\t\texpired[name] = true;\n\t\t\t\t}\n\n\t\t\t\t// If session has expired then we dont want to store its value until it can be established that its been updated\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Has session changed?\n\t\t\telse if (oldSess.access_token === session.access_token &&\n\t\t\toldSess.expires === session.expires) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Access_token has been removed\n\t\t\telse if (!session.access_token && oldSess.access_token) {\n\t\t\t\temit('logout');\n\t\t\t}\n\n\t\t\t// Access_token has been created\n\t\t\telse if (session.access_token && !oldSess.access_token) {\n\t\t\t\temit('login');\n\t\t\t}\n\n\t\t\t// Access_token has been updated\n\t\t\telse if (session.expires !== oldSess.expires) {\n\t\t\t\temit('update');\n\t\t\t}\n\n\t\t\t// Updated stored session\n\t\t\toldSessions[name] = session;\n\n\t\t\t// Remove the expired flags\n\t\t\tif (name in expired) {\n\t\t\t\tdelete expired[name];\n\t\t\t}\n\t\t}}\n\n\t\t// Check error events\n\t\tsetTimeout(self, 1000);\n\t})();\n\n})(hello);\n\n// EOF CORE lib\n//////////////////////////////////\n\n/////////////////////////////////////////\n// API\n// @param path    string\n// @param query   object (optional)\n// @param method  string (optional)\n// @param data    object (optional)\n// @param timeout integer (optional)\n// @param callback  function (optional)\n\nhello.api = function() {\n\n\t// Shorthand\n\tvar _this = this;\n\tvar utils = _this.utils;\n\tvar error = utils.error;\n\n\t// Construct a new Promise object\n\tvar promise = utils.Promise();\n\n\t// Arguments\n\tvar p = utils.args({path: 's!', query: 'o', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t// Method\n\tp.method = (p.method || 'get').toLowerCase();\n\n\t// Headers\n\tp.headers = p.headers || {};\n\n\t// Query\n\tp.query = p.query || {};\n\n\t// If get, put all parameters into query\n\tif (p.method === 'get' || p.method === 'delete') {\n\t\tutils.extend(p.query, p.data);\n\t\tp.data = {};\n\t}\n\n\tvar data = p.data = p.data || {};\n\n\t// Completed event callback\n\tpromise.then(p.callback, p.callback);\n\n\t// Remove the network from path, e.g. facebook:/me/friends\n\t// Results in { network : facebook, path : me/friends }\n\tif (!p.path) {\n\t\treturn promise.reject(error('invalid_path', 'Missing the path parameter from the request'));\n\t}\n\n\tp.path = p.path.replace(/^\\/+/, '');\n\tvar a = (p.path.split(/[\\/\\:]/, 2) || [])[0].toLowerCase();\n\n\tif (a in _this.services) {\n\t\tp.network = a;\n\t\tvar reg = new RegExp('^' + a + ':?\\/?');\n\t\tp.path = p.path.replace(reg, '');\n\t}\n\n\t// Network & Provider\n\t// Define the network that this request is made for\n\tp.network = _this.settings.default_service = p.network || _this.settings.default_service;\n\tvar o = _this.services[p.network];\n\n\t// INVALID\n\t// Is there no service by the given network name?\n\tif (!o) {\n\t\treturn promise.reject(error('invalid_network', 'Could not match the service requested: ' + p.network));\n\t}\n\n\t// PATH\n\t// As long as the path isn't flagged as unavaiable, e.g. path == false\n\n\tif (!(!(p.method in o) || !(p.path in o[p.method]) || o[p.method][p.path] !== false)) {\n\t\treturn promise.reject(error('invalid_path', 'The provided path is not available on the selected network'));\n\t}\n\n\t// PROXY\n\t// OAuth1 calls always need a proxy\n\n\tif (!p.oauth_proxy) {\n\t\tp.oauth_proxy = _this.settings.oauth_proxy;\n\t}\n\n\tif (!('proxy' in p)) {\n\t\tp.proxy = p.oauth_proxy && o.oauth && parseInt(o.oauth.version, 10) === 1;\n\t}\n\n\t// TIMEOUT\n\t// Adopt timeout from global settings by default\n\n\tif (!('timeout' in p)) {\n\t\tp.timeout = _this.settings.timeout;\n\t}\n\n\t// Format response\n\t// Whether to run the raw response through post processing.\n\tif (!('formatResponse' in p)) {\n\t\tp.formatResponse = true;\n\t}\n\n\t// Get the current session\n\t// Append the access_token to the query\n\tp.authResponse = _this.getAuthResponse(p.network);\n\tif (p.authResponse && p.authResponse.access_token) {\n\t\tp.query.access_token = p.authResponse.access_token;\n\t}\n\n\tvar url = p.path;\n\tvar m;\n\n\t// Store the query as options\n\t// This is used to populate the request object before the data is augmented by the prewrap handlers.\n\tp.options = utils.clone(p.query);\n\n\t// Clone the data object\n\t// Prevent this script overwriting the data of the incoming object.\n\t// Ensure that everytime we run an iteration the callbacks haven't removed some data\n\tp.data = utils.clone(data);\n\n\t// URL Mapping\n\t// Is there a map for the given URL?\n\tvar actions = o[{'delete': 'del'}[p.method] || p.method] || {};\n\n\t// Extrapolate the QueryString\n\t// Provide a clean path\n\t// Move the querystring into the data\n\tif (p.method === 'get') {\n\n\t\tvar query = url.split(/[\\?#]/)[1];\n\t\tif (query) {\n\t\t\tutils.extend(p.query, utils.param(query));\n\n\t\t\t// Remove the query part from the URL\n\t\t\turl = url.replace(/\\?.*?(#|$)/, '$1');\n\t\t}\n\t}\n\n\t// Is the hash fragment defined\n\tif ((m = url.match(/#(.+)/, ''))) {\n\t\turl = url.split('#')[0];\n\t\tp.path = m[1];\n\t}\n\telse if (url in actions) {\n\t\tp.path = url;\n\t\turl = actions[url];\n\t}\n\telse if ('default' in actions) {\n\t\turl = actions['default'];\n\t}\n\n\t// Redirect Handler\n\t// This defines for the Form+Iframe+Hash hack where to return the results too.\n\tp.redirect_uri = _this.settings.redirect_uri;\n\n\t// Define FormatHandler\n\t// The request can be procesed in a multitude of ways\n\t// Here's the options - depending on the browser and endpoint\n\tp.xhr = o.xhr;\n\tp.jsonp = o.jsonp;\n\tp.form = o.form;\n\n\t// Make request\n\tif (typeof (url) === 'function') {\n\t\t// Does self have its own callback?\n\t\turl(p, getPath);\n\t}\n\telse {\n\t\t// Else the URL is a string\n\t\tgetPath(url);\n\t}\n\n\treturn promise.proxy;\n\n\t// If url needs a base\n\t// Wrap everything in\n\tfunction getPath(url) {\n\n\t\t// Format the string if it needs it\n\t\turl = url.replace(/\\@\\{([a-z\\_\\-]+)(\\|.*?)?\\}/gi, function(m, key, defaults) {\n\t\t\tvar val = defaults ? defaults.replace(/^\\|/, '') : '';\n\t\t\tif (key in p.query) {\n\t\t\t\tval = p.query[key];\n\t\t\t\tdelete p.query[key];\n\t\t\t}\n\t\t\telse if (p.data && key in p.data) {\n\t\t\t\tval = p.data[key];\n\t\t\t\tdelete p.data[key];\n\t\t\t}\n\t\t\telse if (!defaults) {\n\t\t\t\tpromise.reject(error('missing_attribute', 'The attribute ' + key + ' is missing from the request'));\n\t\t\t}\n\n\t\t\treturn val;\n\t\t});\n\n\t\t// Add base\n\t\tif (!url.match(/^https?:\\/\\//)) {\n\t\t\turl = o.base + url;\n\t\t}\n\n\t\t// Define the request URL\n\t\tp.url = url;\n\n\t\t// Make the HTTP request with the curated request object\n\t\t// CALLBACK HANDLER\n\t\t// @ response object\n\t\t// @ statusCode integer if available\n\t\tutils.request(p, function(r, headers) {\n\n\t\t\t// Is this a raw response?\n\t\t\tif (!p.formatResponse) {\n\t\t\t\t// Bad request? error statusCode or otherwise contains an error response vis JSONP?\n\t\t\t\tif (typeof headers === 'object' ? (headers.statusCode >= 400) : (typeof r === 'object' && 'error' in r)) {\n\t\t\t\t\tpromise.reject(r);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpromise.fulfill(r);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Should this be an object\n\t\t\tif (r === true) {\n\t\t\t\tr = {success:true};\n\t\t\t}\n\t\t\telse if (!r) {\n\t\t\t\tr = {};\n\t\t\t}\n\n\t\t\t// The delete callback needs a better response\n\t\t\tif (p.method === 'delete') {\n\t\t\t\tr = (!r || utils.isEmpty(r)) ? {success:true} : r;\n\t\t\t}\n\n\t\t\t// FORMAT RESPONSE?\n\t\t\t// Does self request have a corresponding formatter\n\t\t\tif (o.wrap && ((p.path in o.wrap) || ('default' in o.wrap))) {\n\t\t\t\tvar wrap = (p.path in o.wrap ? p.path : 'default');\n\t\t\t\tvar time = (new Date()).getTime();\n\n\t\t\t\t// FORMAT RESPONSE\n\t\t\t\tvar b = o.wrap[wrap](r, headers, p);\n\n\t\t\t\t// Has the response been utterly overwritten?\n\t\t\t\t// Typically self augments the existing object.. but for those rare occassions\n\t\t\t\tif (b) {\n\t\t\t\t\tr = b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Is there a next_page defined in the response?\n\t\t\tif (r && 'paging' in r && r.paging.next) {\n\n\t\t\t\t// Add the relative path if it is missing from the paging/next path\n\t\t\t\tif (r.paging.next[0] === '?') {\n\t\t\t\t\tr.paging.next = p.path + r.paging.next;\n\t\t\t\t}\n\n\t\t\t\t// The relative path has been defined, lets markup the handler in the HashFragment\n\t\t\t\telse {\n\t\t\t\t\tr.paging.next += '#' + p.path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatch to listeners\n\t\t\t// Emit events which pertain to the formatted response\n\t\t\tif (!r || 'error' in r) {\n\t\t\t\tpromise.reject(r);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise.fulfill(r);\n\t\t\t}\n\t\t});\n\t}\n};\n\n// API utilities\nhello.utils.extend(hello.utils, {\n\n\t// Make an HTTP request\n\trequest: function(p, callback) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// This has to go through a POST request\n\t\tif (!_this.isEmpty(p.data) && !('FileList' in window) && _this.hasBinary(p.data)) {\n\n\t\t\t// Disable XHR and JSONP\n\t\t\tp.xhr = false;\n\t\t\tp.jsonp = false;\n\t\t}\n\n\t\t// Check if the browser and service support CORS\n\t\tvar cors = this.request_cors(function() {\n\t\t\t// If it does then run this...\n\t\t\treturn ((p.xhr === undefined) || (p.xhr && (typeof (p.xhr) !== 'function' || p.xhr(p, p.query))));\n\t\t});\n\n\t\tif (cors) {\n\n\t\t\tformatUrl(p, function(url) {\n\n\t\t\t\tvar x = _this.xhr(p.method, url, p.headers, p.data, callback);\n\t\t\t\tx.onprogress = p.onprogress || null;\n\n\t\t\t\t// Windows Phone does not support xhr.upload, see #74\n\t\t\t\t// Feature detect\n\t\t\t\tif (x.upload && p.onuploadprogress) {\n\t\t\t\t\tx.upload.onprogress = p.onuploadprogress;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the query object\n\t\t// Each request modifies the query object and needs to be tared after each one.\n\t\tvar _query = p.query;\n\n\t\tp.query = _this.clone(p.query);\n\n\t\t// Assign a new callbackID\n\t\tp.callbackID = _this.globalEvent();\n\n\t\t// JSONP\n\t\tif (p.jsonp !== false) {\n\n\t\t\t// Clone the query object\n\t\t\tp.query.callback = p.callbackID;\n\n\t\t\t// If the JSONP is a function then run it\n\t\t\tif (typeof (p.jsonp) === 'function') {\n\t\t\t\tp.jsonp(p, p.query);\n\t\t\t}\n\n\t\t\t// Lets use JSONP if the method is 'get'\n\t\t\tif (p.method === 'get') {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.jsonp(url, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// It's not compatible reset query\n\t\t\t\tp.query = _query;\n\t\t\t}\n\n\t\t}\n\n\t\t// Otherwise we're on to the old school, iframe hacks and JSONP\n\t\tif (p.form !== false) {\n\n\t\t\t// Add some additional query parameters to the URL\n\t\t\t// We're pretty stuffed if the endpoint doesn't like these\n\t\t\tp.query.redirect_uri = p.redirect_uri;\n\t\t\tp.query.state = JSON.stringify({callback:p.callbackID});\n\n\t\t\tvar opts;\n\n\t\t\tif (typeof (p.form) === 'function') {\n\n\t\t\t\t// Format the request\n\t\t\t\topts = p.form(p, p.query);\n\t\t\t}\n\n\t\t\tif (p.method === 'post' && opts !== false) {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.post(url, p.data, opts, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// None of the methods were successful throw an error\n\t\tcallback(error('invalid_request', 'There was no mechanism for handling this request'));\n\n\t\treturn;\n\n\t\t// Format URL\n\t\t// Constructs the request URL, optionally wraps the URL through a call to a proxy server\n\t\t// Returns the formatted URL\n\t\tfunction formatUrl(p, callback) {\n\n\t\t\t// Are we signing the request?\n\t\t\tvar sign;\n\n\t\t\t// OAuth1\n\t\t\t// Remove the token from the query before signing\n\t\t\tif (p.authResponse && p.authResponse.oauth && parseInt(p.authResponse.oauth.version, 10) === 1) {\n\n\t\t\t\t// OAUTH SIGNING PROXY\n\t\t\t\tsign = p.query.access_token;\n\n\t\t\t\t// Remove the access_token\n\t\t\t\tdelete p.query.access_token;\n\n\t\t\t\t// Enfore use of Proxy\n\t\t\t\tp.proxy = true;\n\t\t\t}\n\n\t\t\t// POST body to querystring\n\t\t\tif (p.data && (p.method === 'get' || p.method === 'delete')) {\n\t\t\t\t// Attach the p.data to the querystring.\n\t\t\t\t_this.extend(p.query, p.data);\n\t\t\t\tp.data = null;\n\t\t\t}\n\n\t\t\t// Construct the path\n\t\t\tvar path = _this.qs(p.url, p.query);\n\n\t\t\t// Proxy the request through a server\n\t\t\t// Used for signing OAuth1\n\t\t\t// And circumventing services without Access-Control Headers\n\t\t\tif (p.proxy) {\n\t\t\t\t// Use the proxy as a path\n\t\t\t\tpath = _this.qs(p.oauth_proxy, {\n\t\t\t\t\tpath: path,\n\t\t\t\t\taccess_token: sign || '',\n\n\t\t\t\t\t// This will prompt the request to be signed as though it is OAuth1\n\t\t\t\t\tthen: p.proxy_response_type || (p.method.toLowerCase() === 'get' ? 'redirect' : 'proxy'),\n\t\t\t\t\tmethod: p.method.toLowerCase(),\n\t\t\t\t\tsuppress_response_codes: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcallback(path);\n\t\t}\n\t},\n\n\t// Test whether the browser supports the CORS response\n\trequest_cors: function(callback) {\n\t\treturn 'withCredentials' in new XMLHttpRequest() && callback();\n\t},\n\n\t// Return the type of DOM object\n\tdomInstance: function(type, data) {\n\t\tvar test = 'HTML' + (type || '').replace(\n\t\t\t/^[a-z]/,\n\t\t\tfunction(m) {\n\t\t\t\treturn m.toUpperCase();\n\t\t\t}\n\n\t\t) + 'Element';\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window[test]) {\n\t\t\treturn data instanceof window[test];\n\t\t}\n\t\telse if (window.Element) {\n\t\t\treturn data instanceof window.Element && (!type || (data.tagName && data.tagName.toLowerCase() === type));\n\t\t}\n\t\telse {\n\t\t\treturn (!(data instanceof Object || data instanceof Array || data instanceof String || data instanceof Number) && data.tagName && data.tagName.toLowerCase() === type);\n\t\t}\n\t},\n\n\t// Create a clone of an object\n\tclone: function(obj) {\n\t\t// Does not clone DOM elements, nor Binary data, e.g. Blobs, Filelists\n\t\tif (obj === null || typeof (obj) !== 'object' || obj instanceof Date || 'nodeName' in obj || this.isBinary(obj)) {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\t// Clone each item in the array\n\t\t\treturn obj.map(this.clone.bind(this));\n\t\t}\n\n\t\t// But does clone everything else.\n\t\tvar clone = {};\n\t\tfor (var x in obj) {\n\t\t\tclone[x] = this.clone(obj[x]);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\t// XHR: uses CORS to make requests\n\txhr: function(method, url, headers, data, callback) {\n\n\t\tvar r = new XMLHttpRequest();\n\t\tvar error = this.error;\n\n\t\t// Binary?\n\t\tvar binary = false;\n\t\tif (method === 'blob') {\n\t\t\tbinary = method;\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tmethod = method.toUpperCase();\n\n\t\t// Xhr.responseType 'json' is not supported in any of the vendors yet.\n\t\tr.onload = function(e) {\n\t\t\tvar json = r.response;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {\n\t\t\t\tif (r.status === 401) {\n\t\t\t\t\tjson = error('access_denied', r.statusText);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar headers = headersToJSON(r.getAllResponseHeaders());\n\t\t\theaders.statusCode = r.status;\n\n\t\t\tcallback(json || (method === 'GET' ? error('empty_response', 'Could not get resource') : {}), headers);\n\t\t};\n\n\t\tr.onerror = function(e) {\n\t\t\tvar json = r.responseText;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {}\n\n\t\t\tcallback(json || error('access_denied', 'Could not get resource'));\n\t\t};\n\n\t\tvar x;\n\n\t\t// Should we add the query to the URL?\n\t\tif (method === 'GET' || method === 'DELETE') {\n\t\t\tdata = null;\n\t\t}\n\t\telse if (data && typeof (data) !== 'string' && !(data instanceof FormData) && !(data instanceof File) && !(data instanceof Blob)) {\n\t\t\t// Loop through and add formData\n\t\t\tvar f = new FormData();\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\tif (data[x] instanceof HTMLInputElement) {\n\t\t\t\t\tif ('files' in data[x] && data[x].files.length > 0) {\n\t\t\t\t\t\tf.append(x, data[x].files[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (data[x] instanceof Blob) {\n\t\t\t\t\tf.append(x, data[x], data.name);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf.append(x, data[x]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata = f;\n\t\t}\n\n\t\t// Open the path, async\n\t\tr.open(method, url, true);\n\n\t\tif (binary) {\n\t\t\tif ('responseType' in r) {\n\t\t\t\tr.responseType = binary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\t\t}\n\n\t\t// Set any bespoke headers\n\t\tif (headers) {\n\t\t\tfor (x in headers) {\n\t\t\t\tr.setRequestHeader(x, headers[x]);\n\t\t\t}\n\t\t}\n\n\t\tr.send(data);\n\n\t\treturn r;\n\n\t\t// Headers are returned as a string\n\t\tfunction headersToJSON(s) {\n\t\t\tvar r = {};\n\t\t\tvar reg = /([a-z\\-]+):\\s?(.*);?/gi;\n\t\t\tvar m;\n\t\t\twhile ((m = reg.exec(s))) {\n\t\t\t\tr[m[1]] = m[2];\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\t},\n\n\t// JSONP\n\t// Injects a script tag into the DOM to be executed and appends a callback function to the window object\n\t// @param string/function pathFunc either a string of the URL or a callback function pathFunc(querystringhash, continueFunc);\n\t// @param function callback a function to call on completion;\n\tjsonp: function(url, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// Change the name of the callback\n\t\tvar bool = 0;\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar operaFix;\n\t\tvar result = error('server_error', 'server_error');\n\t\tvar cb = function() {\n\t\t\tif (!(bool++)) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tcallback(result);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t};\n\n\t\t// Add callback to the window object\n\t\tcallbackID = _this.globalEvent(function(json) {\n\t\t\tresult = json;\n\t\t\treturn true;\n\n\t\t\t// Mark callback as done\n\t\t}, callbackID);\n\n\t\t// The URL is a function for some cases and as such\n\t\t// Determine its value with a callback containing the new parameters of this function.\n\t\turl = url.replace(new RegExp('=\\\\?(&|$)'), '=' + callbackID + '$1');\n\n\t\t// Build script tag\n\t\tvar script = _this.append('script', {\n\t\t\tid: callbackID,\n\t\t\tname: callbackID,\n\t\t\tsrc: url,\n\t\t\tasync: true,\n\t\t\tonload: cb,\n\t\t\tonerror: cb,\n\t\t\tonreadystatechange: function() {\n\t\t\t\tif (/loaded|complete/i.test(this.readyState)) {\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Opera fix error\n\t\t// Problem: If an error occurs with script loading Opera fails to trigger the script.onerror handler we specified\n\t\t//\n\t\t// Fix:\n\t\t// By setting the request to synchronous we can trigger the error handler when all else fails.\n\t\t// This action will be ignored if we've already called the callback handler \"cb\" with a successful onload event\n\t\tif (window.navigator.userAgent.toLowerCase().indexOf('opera') > -1) {\n\t\t\toperaFix = _this.append('script', {\n\t\t\t\ttext: 'document.getElementById(\\'' + callbackID + '\\').onerror();'\n\t\t\t});\n\t\t\tscript.async = false;\n\t\t}\n\n\t\t// Add timeout\n\t\tif (timeout) {\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tresult = error('timeout', 'timeout');\n\t\t\t\tcb();\n\t\t\t}, timeout);\n\t\t}\n\n\t\t// TODO: add fix for IE,\n\t\t// However: unable recreate the bug of firing off the onreadystatechange before the script content has been executed and the value of \"result\" has been defined.\n\t\t// Inject script tag into the head element\n\t\thead.appendChild(script);\n\n\t\t// Append Opera Fix to run after our script\n\t\tif (operaFix) {\n\t\t\thead.appendChild(operaFix);\n\t\t}\n\t},\n\n\t// Post\n\t// Send information to a remote location using the post mechanism\n\t// @param string uri path\n\t// @param object data, key value data to send\n\t// @param function callback, function to execute in response\n\tpost: function(url, data, options, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\t\tvar doc = document;\n\n\t\t// This hack needs a form\n\t\tvar form = null;\n\t\tvar reenableAfterSubmit = [];\n\t\tvar newform;\n\t\tvar i = 0;\n\t\tvar x = null;\n\t\tvar bool = 0;\n\t\tvar cb = function(r) {\n\t\t\tif (!(bool++)) {\n\t\t\t\tcallback(r);\n\t\t\t}\n\t\t};\n\n\t\t// What is the name of the callback to contain\n\t\t// We'll also use this to name the iframe\n\t\t_this.globalEvent(cb, callbackID);\n\n\t\t// Build the iframe window\n\t\tvar win;\n\t\ttry {\n\t\t\t// IE7 hack, only lets us define the name here, not later.\n\t\t\twin = doc.createElement('<iframe name=\"' + callbackID + '\">');\n\t\t}\n\t\tcatch (e) {\n\t\t\twin = doc.createElement('iframe');\n\t\t}\n\n\t\twin.name = callbackID;\n\t\twin.id = callbackID;\n\t\twin.style.display = 'none';\n\n\t\t// Override callback mechanism. Triggger a response onload/onerror\n\t\tif (options && options.callbackonload) {\n\t\t\t// Onload is being fired twice\n\t\t\twin.onload = function() {\n\t\t\t\tcb({\n\t\t\t\t\tresponse: 'posted',\n\t\t\t\t\tmessage: 'Content was posted'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tcb(error('timeout', 'The post operation timed out'));\n\t\t\t}, timeout);\n\t\t}\n\n\t\tdoc.body.appendChild(win);\n\n\t\t// If we are just posting a single item\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// Get the parent form\n\t\t\tform = data.form;\n\n\t\t\t// Loop through and disable all of its siblings\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (form.elements[i] !== data) {\n\t\t\t\t\tform.elements[i].setAttribute('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move the focus to the form\n\t\t\tdata = form;\n\t\t}\n\n\t\t// Posting a form\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// This is a form element\n\t\t\tform = data;\n\n\t\t\t// Does this form need to be a multipart form?\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (!form.elements[i].disabled && form.elements[i].type === 'file') {\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t\tform.elements[i].setAttribute('name', 'file');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Its not a form element,\n\t\t\t// Therefore it must be a JSON object of Key=>Value or Key=>Element\n\t\t\t// If anyone of those values are a input type=file we shall shall insert its siblings into the form for which it belongs.\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\t// Is this an input Element?\n\t\t\t\tif (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\tform = data[x].form;\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do If there is no defined form element, lets create one.\n\t\t\tif (!form) {\n\t\t\t\t// Build form\n\t\t\t\tform = doc.createElement('form');\n\t\t\t\tdoc.body.appendChild(form);\n\t\t\t\tnewform = form;\n\t\t\t}\n\n\t\t\tvar input;\n\n\t\t\t// Add elements to the form if they dont exist\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t// Is this an element?\n\t\t\t\tvar el = (_this.domInstance('input', data[x]) || _this.domInstance('textArea', data[x]) || _this.domInstance('select', data[x]));\n\n\t\t\t\t// Is this not an input element, or one that exists outside the form.\n\t\t\t\tif (!el || data[x].form !== form) {\n\n\t\t\t\t\t// Does an element have the same name?\n\t\t\t\t\tvar inputs = form.elements[x];\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\t// Remove it.\n\t\t\t\t\t\tif (!(inputs instanceof NodeList)) {\n\t\t\t\t\t\t\tinputs = [inputs];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create an input element\n\t\t\t\t\tinput = doc.createElement('input');\n\t\t\t\t\tinput.setAttribute('type', 'hidden');\n\t\t\t\t\tinput.setAttribute('name', x);\n\n\t\t\t\t\t// Does it have a value attribute?\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tinput.value = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tinput.value = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinput.value = data[x];\n\t\t\t\t\t}\n\n\t\t\t\t\tform.appendChild(input);\n\t\t\t\t}\n\n\t\t\t\t// It is an element, which exists within the form, but the name is wrong\n\t\t\t\telse if (el && data[x].name !== x) {\n\t\t\t\t\tdata[x].setAttribute('name', x);\n\t\t\t\t\tdata[x].name = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable elements from within the form if they weren't specified\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\n\t\t\t\tinput = form.elements[i];\n\n\t\t\t\t// Does the same name and value exist in the parent\n\t\t\t\tif (!(input.name in data) && input.getAttribute('disabled') !== true) {\n\t\t\t\t\t// Disable\n\t\t\t\t\tinput.setAttribute('disabled', true);\n\n\t\t\t\t\t// Add re-enable to callback\n\t\t\t\t\treenableAfterSubmit.push(input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the target of the form\n\t\tform.setAttribute('method', 'POST');\n\t\tform.setAttribute('target', callbackID);\n\t\tform.target = callbackID;\n\n\t\t// Update the form URL\n\t\tform.setAttribute('action', url);\n\n\t\t// Submit the form\n\t\t// Some reason this needs to be offset from the current window execution\n\t\tsetTimeout(function() {\n\t\t\tform.submit();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove the iframe from the page.\n\t\t\t\t\t//win.parentNode.removeChild(win);\n\t\t\t\t\t// Remove the form\n\t\t\t\t\tif (newform) {\n\t\t\t\t\t\tnewform.parentNode.removeChild(newform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.error('HelloJS: could not remove iframe');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ee) {}\n\t\t\t\t}\n\n\t\t\t\t// Reenable the disabled form\n\t\t\t\tfor (var i = 0; i < reenableAfterSubmit.length; i++) {\n\t\t\t\t\tif (reenableAfterSubmit[i]) {\n\t\t\t\t\t\treenableAfterSubmit[i].setAttribute('disabled', false);\n\t\t\t\t\t\treenableAfterSubmit[i].disabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}, 100);\n\t},\n\n\t// Some of the providers require that only multipart is used with non-binary forms.\n\t// This function checks whether the form contains binary data\n\thasBinary: function(data) {\n\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\t\t\tif (this.isBinary(data[x])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// Determines if a variable Either Is or like a FormInput has the value of a Blob\n\n\tisBinary: function(data) {\n\n\t\treturn data instanceof Object && (\n\t\t(this.domInstance('input', data) && data.type === 'file') ||\n\t\t('FileList' in window && data instanceof window.FileList) ||\n\t\t('File' in window && data instanceof window.File) ||\n\t\t('Blob' in window && data instanceof window.Blob));\n\n\t},\n\n\t// Convert Data-URI to Blob string\n\ttoBlob: function(dataURI) {\n\t\tvar reg = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\t\tvar m = dataURI.match(reg);\n\t\tif (!m) {\n\t\t\treturn dataURI;\n\t\t}\n\n\t\tvar binary = atob(dataURI.replace(reg, ''));\n\t\tvar array = [];\n\t\tfor (var i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\n\t\treturn new Blob([new Uint8Array(array)], {type: m[1]});\n\t}\n\n});\n\n// EXTRA: Convert FormElement to JSON for POSTing\n// Wrappers to add additional functionality to existing functions\n(function(hello) {\n\n\t// Copy original function\n\tvar api = hello.api;\n\tvar utils = hello.utils;\n\n\tutils.extend(utils, {\n\n\t\t// DataToJSON\n\t\t// This takes a FormElement|NodeList|InputElement|MixedObjects and convers the data object to JSON.\n\t\tdataToJSON: function(p) {\n\n\t\t\tvar _this = this;\n\t\t\tvar w = window;\n\t\t\tvar data = p.data;\n\n\t\t\t// Is data a form object\n\t\t\tif (_this.domInstance('form', data)) {\n\t\t\t\tdata = _this.nodeListToJSON(data.elements);\n\t\t\t}\n\t\t\telse if ('NodeList' in w && data instanceof NodeList) {\n\t\t\t\tdata = _this.nodeListToJSON(data);\n\t\t\t}\n\t\t\telse if (_this.domInstance('input', data)) {\n\t\t\t\tdata = _this.nodeListToJSON([data]);\n\t\t\t}\n\n\t\t\t// Is data a blob, File, FileList?\n\t\t\tif (('File' in w && data instanceof w.File) ||\n\t\t\t\t('Blob' in w && data instanceof w.Blob) ||\n\t\t\t\t('FileList' in w && data instanceof w.FileList)) {\n\t\t\t\tdata = {file: data};\n\t\t\t}\n\n\t\t\t// Loop through data if it's not form data it must now be a JSON object\n\t\t\tif (!('FormData' in w && data instanceof w.FormData)) {\n\n\t\t\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t\tif ('FileList' in w && data[x] instanceof w.FileList) {\n\t\t\t\t\t\tif (data[x].length === 1) {\n\t\t\t\t\t\t\tdata[x] = data[x][0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('select', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('textArea', data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.data = data;\n\t\t\treturn data;\n\t\t},\n\n\t\t// NodeListToJSON\n\t\t// Given a list of elements extrapolate their values and return as a json object\n\t\tnodeListToJSON: function(nodelist) {\n\n\t\t\tvar json = {};\n\n\t\t\t// Create a data string\n\t\t\tfor (var i = 0; i < nodelist.length; i++) {\n\n\t\t\t\tvar input = nodelist[i];\n\n\t\t\t\t// If the name of the input is empty or diabled, dont add it.\n\t\t\t\tif (input.disabled || !input.name) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Is this a file, does the browser not support 'files' and 'FormData'?\n\t\t\t\tif (input.type === 'file') {\n\t\t\t\t\tjson[input.name] = input;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjson[input.name] = input.value || input.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\t});\n\n\t// Replace it\n\thello.api = function() {\n\n\t\t// Get arguments\n\t\tvar p = utils.args({path: 's!', method: 's', data:'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t\t// Change for into a data object\n\t\tif (p.data) {\n\t\t\tutils.dataToJSON(p);\n\t\t}\n\n\t\treturn api.call(this, p);\n\t};\n\n})(hello);\n\n/////////////////////////////////////\n//\n// Save any access token that is in the current page URL\n// Handle any response solicited through iframe hash tag following an API request\n//\n/////////////////////////////////////\n\nhello.utils.responseHandler(window, window.opener || window.parent);\n",
    "// Phonegap override for hello.phonegap.js\n(function() {\n\n\t// Is this a phonegap implementation?\n\tif (!(/^file:\\/{3}[^\\/]/.test(window.location.href) && window.cordova)) {\n\t\t// Cordova is not included.\n\t\treturn;\n\t}\n\n\t// Augment the hidden iframe method\n\thello.utils.iframe = function(url, redirectUri) {\n\t\thello.utils.popup(url, redirectUri, {hidden: 'yes'});\n\t};\n\n\t// Augment the popup\n\tvar utilPopup = hello.utils.popup;\n\n\t// Replace popup\n\thello.utils.popup = function(url, redirectUri, options) {\n\n\t\t// Run the standard\n\t\tvar popup = utilPopup.call(this, url, redirectUri, options);\n\n\t\t// Create a function for reopening the popup, and assigning events to the new popup object\n\t\t// PhoneGap support\n\t\t// Add an event listener to listen to the change in the popup windows URL\n\t\t// This must appear before popup.focus();\n\t\ttry {\n\t\t\tif (popup && popup.addEventListener) {\n\n\t\t\t\t// Get the origin of the redirect URI\n\n\t\t\t\tvar a = hello.utils.url(redirectUri);\n\t\t\t\tvar redirectUriOrigin = a.origin || (a.protocol + '//' + a.hostname);\n\n\t\t\t\t// Listen to changes in the InAppBrowser window\n\n\t\t\t\tpopup.addEventListener('loadstart', function(e) {\n\n\t\t\t\t\tvar url = e.url;\n\n\t\t\t\t\t// Is this the path, as given by the redirectUri?\n\t\t\t\t\t// Check the new URL agains the redirectUriOrigin.\n\t\t\t\t\t// According to #63 a user could click 'cancel' in some dialog boxes ....\n\t\t\t\t\t// The popup redirects to another page with the same origin, yet we still wish it to close.\n\n\t\t\t\t\tif (url.indexOf(redirectUriOrigin) !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split appart the URL\n\t\t\t\t\tvar a = hello.utils.url(url);\n\n\t\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\t\t// The location can be augmented in to a location object like so...\n\n\t\t\t\t\tvar _popup = {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\t\tassign: function(location) {\n\n\t\t\t\t\t\t\t\t// Unfourtunatly an app is may not change the location of a InAppBrowser window.\n\t\t\t\t\t\t\t\t// So to shim this, just open a new one.\n\t\t\t\t\t\t\t\tpopup.executeScript({code: 'window.location.href = \"' + location + ';\"'});\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\t\thref: a.href\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\tif (popup.close) {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tpopup.closed = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (_e) {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t\t// URL string\n\t\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\t\thello.utils.responseHandler(_popup, window);\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\treturn popup;\n\t};\n\n})();\n",
    "// ES5 Object.create\nif (!Object.create) {\n\n\t// Shim, Object create\n\t// A shim for Object.create(), it adds a prototype to a new object\n\tObject.create = (function() {\n\n\t\tfunction F() {}\n\n\t\treturn function(o) {\n\n\t\t\tif (arguments.length != 1) {\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\n\t\t\t}\n\n\t\t\tF.prototype = o;\n\t\t\treturn new F();\n\t\t};\n\n\t})();\n\n}\n\n// ES5 Object.keys\nif (!Object.keys) {\n\tObject.keys = function(o, k, r) {\n\t\tr = [];\n\t\tfor (k in o) {\n\t\t\tif (r.hasOwnProperty.call(o, k))\n\t\t\t\tr.push(k);\n\t\t}\n\n\t\treturn r;\n\t};\n}\n\n// ES5 [].indexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function(s) {\n\n\t\tfor (var j = 0; j < this.length; j++) {\n\t\t\tif (this[j] === s) {\n\t\t\t\treturn j;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\n// ES5 [].forEach\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function(fun/*, thisArg*/) {\n\n\t\tif (this === void 0 || this === null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\t\tif (typeof fun !== 'function') {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (i in t) {\n\t\t\t\tfun.call(thisArg, t[i], i, t);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n}\n\n// ES5 [].filter\nif (!Array.prototype.filter) {\n\tArray.prototype.filter = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\tif (fun.call(thisArg || void 0, val, i, t)) {\n\t\t\t\ta.push(val);\n\t\t\t}\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.19\n// Reference: http://es5.github.io/#x15.4.4.19\nif (!Array.prototype.map) {\n\n\tArray.prototype.map = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\ta.push(fun.call(thisArg || void 0, val, i, t));\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// ES5 isArray\nif (!Array.isArray) {\n\n\t// Function Array.isArray\n\tArray.isArray = function(o) {\n\t\treturn Object.prototype.toString.call(o) === '[object Array]';\n\t};\n\n}\n\n// Test for location.assign\nif (typeof window === 'object' && typeof window.location === 'object' && !window.location.assign) {\n\n\twindow.location.assign = function(url) {\n\t\twindow.location = url;\n\t};\n\n}\n\n// Test for Function.bind\nif (!Function.prototype.bind) {\n\n\t// MDN\n\t// Polyfill IE8, does not support native Function.bind\n\tFunction.prototype.bind = function(b) {\n\n\t\tif (typeof this !== 'function') {\n\t\t\tthrow new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n\t\t}\n\n\t\tfunction C() {}\n\n\t\tvar a = [].slice;\n\t\tvar f = a.call(arguments, 1);\n\t\tvar _this = this;\n\t\tvar D = function() {\n\t\t\treturn _this.apply(this instanceof C ? this : b || window, f.concat(a.call(arguments)));\n\t\t};\n\n\t\tC.prototype = this.prototype;\n\t\tD.prototype = new C();\n\n\t\treturn D;\n\t};\n\n}\n",
    "(function(hello) {\n\n\t// OAuth1\n\tvar OAuth1Settings = {\n\t\tversion: '1.0',\n\t\tauth: 'https://www.dropbox.com/1/oauth/authorize',\n\t\trequest: 'https://api.dropbox.com/1/oauth/request_token',\n\t\ttoken: 'https://api.dropbox.com/1/oauth/access_token'\n\t};\n\n\t// OAuth2 Settings\n\tvar OAuth2Settings = {\n\t\tversion: 2,\n\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t};\n\n\t// Initiate the Dropbox module\n\thello.init({\n\n\t\tdropbox: {\n\n\t\t\tname: 'Dropbox',\n\n\t\t\toauth: OAuth2Settings,\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// OAuth2 non-standard adjustments\n\t\t\t\tp.qs.scope = '';\n\t\t\t\tdelete p.qs.display;\n\n\t\t\t\t// Should this be run as OAuth1?\n\t\t\t\t// If the redirect_uri is is HTTP (non-secure) then its required to revert to the OAuth1 endpoints\n\t\t\t\tvar redirect = decodeURIComponent(p.qs.redirect_uri);\n\t\t\t\tif (redirect.indexOf('http:') === 0 && redirect.indexOf('http://localhost/') !== 0) {\n\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth1Settings;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth2Settings;\n\t\t\t\t}\n\n\t\t\t\t// The dropbox login window is a different size\n\t\t\t\tp.options.popup.width = 1000;\n\t\t\t\tp.options.popup.height = 1000;\n\t\t\t},\n\n\t\t\t/*\n\t\t\t\tDropbox does not allow insecure HTTP URI's in the redirect_uri field\n\t\t\t\t...otherwise I'd love to use OAuth2\n\n\t\t\t\tFollow request https://forums.dropbox.com/topic.php?id=106505\n\n\t\t\t\tp.qs.response_type = 'code';\n\t\t\t\toauth: {\n\t\t\t\t\tversion: 2,\n\t\t\t\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\t\t\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t\t\t\t}\n\t\t\t*/\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.dropbox.com/1/',\n\n\t\t\t// Bespoke setting: this is states whether to use the custom environment of Dropbox or to use their own environment\n\t\t\t// Because it's notoriously difficult for Dropbox too provide access from other webservices, this defaults to Sandbox\n\t\t\troot: 'sandbox',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'account/info',\n\n\t\t\t\t// Https://www.dropbox.com/developers/core/docs#metadata\n\t\t\t\t'me/files': req('metadata/auto/@{parent|}'),\n\t\t\t\t'me/folder': req('metadata/auto/@{id}'),\n\t\t\t\t'me/folders': req('metadata/auto/'),\n\n\t\t\t\t'default': function(p, callback) {\n\t\t\t\t\tif (p.path.match('https://api-content.dropbox.com/1/files/')) {\n\t\t\t\t\t\t// This is a file, return binary data\n\t\t\t\t\t\tp.method = 'blob';\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(p.path);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/files': function(p, callback) {\n\n\t\t\t\t\tvar path = p.data.parent;\n\t\t\t\t\tvar fileName = p.data.name;\n\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\tfile: p.data.file\n\t\t\t\t\t};\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('https://api-content.dropbox.com/1/files_put/auto/' + path + '/' + fileName);\n\t\t\t\t},\n\n\t\t\t\t'me/folders': function(p, callback) {\n\n\t\t\t\t\tvar name = p.data.name;\n\t\t\t\t\tp.data = {};\n\n\t\t\t\t\tcallback('fileops/create_folder?root=@{root|sandbox}&' + hello.utils.param({\n\t\t\t\t\t\tpath: name\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'fileops/delete?root=@{root|sandbox}&path=@{id}',\n\t\t\t\t'me/folder': 'fileops/delete?root=@{root|sandbox}&path=@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (!o.uid) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.display_name;\n\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\to.id = o.uid;\n\t\t\t\t\tdelete o.uid;\n\t\t\t\t\tdelete o.display_name;\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o.is_dir && o.contents) {\n\t\t\t\t\t\to.data = o.contents;\n\t\t\t\t\t\tdelete o.contents;\n\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.root = o.root;\n\t\t\t\t\t\t\tformatFile(item, headers, req);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tformatFile(o, headers, req);\n\n\t\t\t\t\tif (o.is_deleted) {\n\t\t\t\t\t\to.success = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Doesn't return the CORS headers\n\t\t\txhr: function(p) {\n\n\t\t\t\t// The proxy supports allow-cross-origin-resource\n\t\t\t\t// Alas that's the only thing we're using.\n\t\t\t\tif (p.data && p.data.file) {\n\t\t\t\t\tvar file = p.data.file;\n\t\t\t\t\tif (file) {\n\t\t\t\t\t\tif (file.files) {\n\t\t\t\t\t\t\tp.data = file.files[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tp.data = file;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (p.method === 'delete') {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tform: function(p, qs) {\n\t\t\t\tdelete qs.state;\n\t\t\t\tdelete qs.redirect_uri;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'error' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: 'server_error',\n\t\t\t\tmessage: o.error.message || o.error\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatFile(o, headers, req) {\n\n\t\tif (typeof o !== 'object' ||\n\t\t\t(typeof Blob !== 'undefined' && o instanceof Blob) ||\n\t\t\t(typeof ArrayBuffer !== 'undefined' && o instanceof ArrayBuffer)) {\n\t\t\t// This is a file, let it through unformatted\n\t\t\treturn;\n\t\t}\n\n\t\tif ('error' in o) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar path = (o.root !== 'app_folder' ? o.root : '') + o.path.replace(/\\&/g, '%26');\n\t\tpath = path.replace(/^\\//, '');\n\t\tif (o.thumb_exists) {\n\t\t\to.thumbnail = req.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/thumbnails/auto/' + path + '?format=jpeg&size=m') + '&access_token=' + req.options.access_token;\n\t\t}\n\n\t\to.type = (o.is_dir ? 'folder' : o.mime_type);\n\t\to.name = o.path.replace(/.*\\//g, '');\n\t\tif (o.is_dir) {\n\t\t\to.files = path.replace(/^\\//, '');\n\t\t}\n\t\telse {\n\t\t\to.downloadLink = hello.settings.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/files/auto/' + path) + '&access_token=' + req.options.access_token;\n\t\t\to.file = 'https://api-content.dropbox.com/1/files/auto/' + path;\n\t\t}\n\n\t\tif (!o.id) {\n\t\t\to.id = o.path.replace(/^\\//, '');\n\t\t}\n\n\t\t// O.media = 'https://api-content.dropbox.com/1/files/' + path;\n\t}\n\n\tfunction req(str) {\n\t\treturn function(p, cb) {\n\t\t\tdelete p.query.limit;\n\t\t\tcb(str);\n\t\t};\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\thello.init({\n\n\t\tfacebook: {\n\n\t\t\tname: 'Facebook',\n\n\t\t\t// SEE https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/v2.1\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://www.facebook.com/dialog/oauth/',\n\t\t\t\tgrant: 'https://graph.facebook.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'public_profile',\n\t\t\t\temail: 'email',\n\t\t\t\tshare: 'user_posts',\n\t\t\t\tbirthday: 'user_birthday',\n\t\t\t\tevents: 'user_events',\n\t\t\t\tphotos: 'user_photos',\n\t\t\t\tvideos: 'user_videos',\n\t\t\t\tfriends: 'user_friends',\n\t\t\t\tfiles: 'user_photos,user_videos',\n\t\t\t\tpublish_files: 'user_photos,user_videos,publish_actions',\n\t\t\t\tpublish: 'publish_actions',\n\n\t\t\t\t// Deprecated in v2.0\n\t\t\t\t// Create_event\t: 'create_event',\n\n\t\t\t\toffline_access: 'offline_access'\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.facebook.com/docs/facebook-login/reauthentication\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.auth_type = 'reauthenticate';\n\t\t\t\t}\n\n\t\t\t\t// The facebook login window is a different size.\n\t\t\t\tp.options.popup.width = 580;\n\t\t\t\tp.options.popup.height = 400;\n\t\t\t},\n\n\t\t\tlogout: function(callback, options) {\n\t\t\t\t// Assign callback to a global handler\n\t\t\t\tvar callbackID = hello.utils.globalEvent(callback);\n\t\t\t\tvar redirect = encodeURIComponent(hello.settings.redirect_uri + '?' + hello.utils.param({callback:callbackID, result: JSON.stringify({force:true}), state: '{}'}));\n\t\t\t\tvar token = (options.authResponse || {}).access_token;\n\t\t\t\thello.utils.iframe('https://www.facebook.com/logout.php?next=' + redirect + '&access_token=' + token);\n\n\t\t\t\t// Possible responses:\n\t\t\t\t// String URL\t- hello.logout should handle the logout\n\t\t\t\t// Undefined\t- this function will handle the callback\n\t\t\t\t// True - throw a success, this callback isn't handling the callback\n\t\t\t\t// False - throw a error\n\t\t\t\tif (!token) {\n\t\t\t\t\t// If there isn't a token, the above wont return a response, so lets trigger a response\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://graph.facebook.com/v2.4/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'me?fields=email,first_name,last_name,name,timezone,verified',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/friends',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/like': 'me/likes',\n\t\t\t\t'me/files': 'me/albums',\n\t\t\t\t'me/albums': 'me/albums?fields=cover_photo,name',\n\t\t\t\t'me/album': '@{id}/photos?fields=picture',\n\t\t\t\t'me/photos': 'me/photos',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'friend/albums': '@{id}/albums',\n\t\t\t\t'friend/photos': '@{id}/photos'\n\n\t\t\t\t// Pagination\n\t\t\t\t// Https://developers.facebook.com/docs/reference/api/pagination/\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/photo': '@{id}'\n\n\t\t\t\t// Https://developers.facebook.com/docs/graph-api/reference/v2.2/object/likes/\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/albums': format,\n\t\t\t\t'me/photos': format,\n\t\t\t\t'me/files': format,\n\t\t\t\t'default': format\n\t\t\t},\n\n\t\t\t// Special requirements for handling XHR\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method === 'get' || p.method === 'post') {\n\t\t\t\t\tqs.suppress_response_codes = true;\n\t\t\t\t}\n\n\t\t\t\t// Is this a post with a data-uri?\n\t\t\t\tif (p.method === 'post' && p.data && typeof (p.data.file) === 'string') {\n\t\t\t\t\t// Convert the Data-URI to a Blob\n\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Special requirements for handling JSONP fallback\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tvar m = p.method;\n\t\t\t\tif (m !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = m;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'delete') {\n\t\t\t\t\tqs.method = 'delete';\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Special requirements for iframe form hack\n\t\t\tform: function(p) {\n\t\t\t\treturn {\n\t\t\t\t\t// Fire the callback onload\n\t\t\t\t\tcallbackonload: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tvar base = 'https://graph.facebook.com/';\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = 'https://graph.facebook.com/' + o.id + '/picture';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction format(o, headers, req) {\n\t\tif (typeof o === 'boolean') {\n\t\t\to = {success: o};\n\t\t}\n\n\t\tif (o && 'data' in o) {\n\t\t\tvar token = req.query.access_token;\n\n\t\t\tif (!(o.data instanceof Array)) {\n\t\t\t\tvar data = o.data;\n\t\t\t\tdelete o.data;\n\t\t\t\to.data = [data];\n\t\t\t}\n\n\t\t\to.data.forEach(function(d) {\n\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\td.pictures = (d.images || [])\n\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t});\n\n\t\t\t\tif (d.cover_photo && d.cover_photo.id) {\n\t\t\t\t\td.thumbnail = base + d.cover_photo.id + '/picture?access_token=' + token;\n\t\t\t\t}\n\n\t\t\t\tif (d.type === 'album') {\n\t\t\t\t\td.files = d.photos = base + d.id + '/photos';\n\t\t\t\t}\n\n\t\t\t\tif (d.can_upload) {\n\t\t\t\t\td.upload_location = base + d.id + '/photos';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\thello.init({\n\n\t\tflickr: {\n\n\t\t\tname: 'Flickr',\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://www.flickr.com/services/oauth/authorize?perms=read',\n\t\t\t\trequest: 'https://www.flickr.com/services/oauth/request_token',\n\t\t\t\ttoken: 'https://www.flickr.com/services/oauth/access_token'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://api.flickr.com/services/rest',\n\n\t\t\t// Map GET resquests\n\t\t\tget: {\n\t\t\t\tme: sign('flickr.people.getInfo'),\n\t\t\t\t'me/friends': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/following': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/followers': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/albums': sign('flickr.photosets.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/album': sign('flickr.photosets.getPhotos', {photoset_id: '@{id}'}),\n\t\t\t\t'me/photos': sign('flickr.people.getPhotos', {per_page:'@{limit|50}'})\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'person');\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\tif (o.realname) {\n\t\t\t\t\t\t\to.name = o.realname._content;\n\t\t\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\to.thumbnail = getBuddyIcon(o, 'l');\n\t\t\t\t\t\to.picture = getBuddyIcon(o, 'l');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'photosets');\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.photoset) {\n\t\t\t\t\t\to.data = o.photoset;\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.name = item.title._content;\n\t\t\t\t\t\t\titem.photos = 'https://api.flickr.com/services/rest' + getApiUrl('flickr.photosets.getPhotos', {photoset_id: item.id}, true);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.photoset;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/photos': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: false,\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tif (p.method == 'get') {\n\t\t\t\t\tdelete qs.callback;\n\t\t\t\t\tqs.jsoncallback = p.callbackID;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getApiUrl(method, extraParams, skipNetwork) {\n\t\tvar url = ((skipNetwork) ? '' : 'flickr:') +\n\t\t\t'?method=' + method +\n\t\t\t'&api_key=' + hello.services.flickr.id +\n\t\t\t'&format=json';\n\t\tfor (var param in extraParams) {\n\t\t\tif (extraParams.hasOwnProperty(param)) {\n\t\t\t\turl += '&' + param + '=' + extraParams[param];\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// This is not exactly neat but avoid to call\n\t// The method 'flickr.test.login' for each api call\n\n\tfunction withUser(cb) {\n\t\tvar auth = hello.getAuthResponse('flickr');\n\t\tcb(auth && auth.user_nsid ? auth.user_nsid : null);\n\t}\n\n\tfunction sign(url, params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn function(p, callback) {\n\t\t\twithUser(function(userId) {\n\t\t\t\tparams.user_id = userId;\n\t\t\t\tcallback(getApiUrl(url, params, true));\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction getBuddyIcon(profile, size) {\n\t\tvar url = 'https://www.flickr.com/images/buddyicon.gif';\n\t\tif (profile.nsid && profile.iconserver && profile.iconfarm) {\n\t\t\turl = 'https://farm' + profile.iconfarm + '.staticflickr.com/' +\n\t\t\t\tprofile.iconserver + '/' +\n\t\t\t\t'buddyicons/' + profile.nsid +\n\t\t\t\t((size) ? '_' + size : '') + '.jpg';\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPhotoUrl(id, farm, server, secret, size) {\n\t\tsize = (size) ? '_' + size : '';\n\t\treturn 'https://farm' + farm + '.staticflickr.com/' + server + '/' + id + '_' + secret + size + '.jpg';\n\t}\n\n\tfunction formatUser(o) {\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o && o.stat && o.stat.toLowerCase() != 'ok') {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatPhotos(o) {\n\t\tif (o.photoset || o.photos) {\n\t\t\tvar set = ('photoset' in o) ? 'photoset' : 'photos';\n\t\t\to = checkResponse(o, set);\n\t\t\tpaging(o);\n\t\t\to.data = o.photo;\n\t\t\tdelete o.photo;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar photo = o.data[i];\n\t\t\t\tphoto.name = photo.title;\n\t\t\t\tphoto.picture = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, '');\n\t\t\t\tphoto.pictures = createPictures(photo.id, photo.farm, photo.server, photo.secret);\n\t\t\t\tphoto.source = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'b');\n\t\t\t\tphoto.thumbnail = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPictures(id, farm, server, secret) {\n\n\t\tvar NO_LIMIT = 2048;\n\t\tvar sizes = [\n\t\t\t{id: 't', max: 100},\n\t\t\t{id: 'm', max: 240},\n\t\t\t{id: 'n', max: 320},\n\t\t\t{id: '', max: 500},\n\t\t\t{id: 'z', max: 640},\n\t\t\t{id: 'c', max: 800},\n\t\t\t{id: 'b', max: 1024},\n\t\t\t{id: 'h', max: 1600},\n\t\t\t{id: 'k', max: 2048},\n\t\t\t{id: 'o', max: NO_LIMIT}\n\t\t];\n\n\t\treturn sizes.map(function(size) {\n\t\t\treturn {\n\t\t\t\tsource: createPhotoUrl(id, farm, server, secret, size.id),\n\n\t\t\t\t// Note: this is a guess that's almost certain to be wrong (unless square source)\n\t\t\t\twidth: size.max,\n\t\t\t\theight: size.max\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction checkResponse(o, key) {\n\n\t\tif (key in o) {\n\t\t\to = o[key];\n\t\t}\n\t\telse if (!('error' in o)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message || 'Failed to get data from Flickr'\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tif (o.contacts) {\n\t\t\to = checkResponse(o, 'contacts');\n\t\t\tpaging(o);\n\t\t\to.data = o.contact;\n\t\t\tdelete o.contact;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar item = o.data[i];\n\t\t\t\titem.id = item.nsid;\n\t\t\t\titem.name = item.realname || item.username;\n\t\t\t\titem.thumbnail = getBuddyIcon(item, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif (res.page && res.pages && res.page !== res.pages) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?page=' + (++res.page)\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\thello.init({\n\n\t\tfoursquare: {\n\n\t\t\tname: 'Foursquare',\n\n\t\t\toauth: {\n\t\t\t\t// See: https://developer.foursquare.com/overview/auth\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://foursquare.com/oauth2/authenticate',\n\t\t\t\tgrant: 'https://foursquare.com/oauth2/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tbase: 'https://api.foursquare.com/v2/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/friends': 'users/self/friends',\n\t\t\t\t'me/followers': 'users/self/friends',\n\t\t\t\t'me/following': 'users/self/friends'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o && o.response) {\n\t\t\t\t\t\to = o.response.user;\n\t\t\t\t\t\tformatUser(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\t// Format friends\n\t\t\t\t\tif (o && 'response' in o && 'friends' in o.response && 'items' in o.response.friends) {\n\t\t\t\t\t\to.data = o.response.friends.items;\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t\tdelete o.response;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o.meta && (o.meta.code === 400 || o.meta.code === 401)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.meta.errorDetail\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o && o.id) {\n\t\t\to.thumbnail = o.photo.prefix + '100x100' + o.photo.suffix;\n\t\t\to.name = o.firstName + ' ' + o.lastName;\n\t\t\to.first_name = o.firstName;\n\t\t\to.last_name = o.lastName;\n\t\t\tif (o.contact) {\n\t\t\t\tif (o.contact.email) {\n\t\t\t\t\to.email = o.contact.email;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs.v = 20121125;\n\t\treturn true;\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\thello.init({\n\n\t\tgithub: {\n\n\t\t\tname: 'GitHub',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://github.com/login/oauth/authorize',\n\t\t\t\tgrant: 'https://github.com/login/oauth/access_token',\n\t\t\t\tresponse_type: 'code'\n\t\t\t},\n\n\t\t\tscope: {\n\t\t\t\temail: 'user:email'\n\t\t\t},\n\n\t\t\tbase: 'https://api.github.com/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\t'me/friends': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/following': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/followers': 'user/followers?per_page=@{limit|100}',\n\t\t\t\t'me/like': 'user/starred?per_page=@{limit|100}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\n\t\t\t\t\tformatError(o, headers);\n\t\t\t\t\tformatUser(o);\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {data:o};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (o.data) {\n\t\t\t\t\t\tpaging(o, headers, req);\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method !== 'get' && p.data) {\n\n\t\t\t\t\t// Serialize payload as JSON\n\t\t\t\t\tp.headers = p.headers || {};\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar code = headers ? headers.statusCode : (o && 'meta' in o && 'status' in o.meta && o.meta.status);\n\t\tif ((code === 401 || code === 403)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.message || (o.data ? o.data.message : 'Could not get response')\n\t\t\t};\n\t\t\tdelete o.message;\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = o.avatar_url;\n\t\t\to.name = o.login;\n\t\t}\n\t}\n\n\tfunction paging(res, headers, req) {\n\t\tif (res.data && res.data.length && headers && headers.Link) {\n\t\t\tvar next = headers.Link.match(/<(.*?)>;\\s*rel=\\\"next\\\"/);\n\t\t\tif (next) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: next[1]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\tvar contactsUrl = 'https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}';\n\n\thello.init({\n\n\t\tgoogle: {\n\n\t\t\tname: 'Google Plus',\n\n\t\t\t// See: http://code.google.com/apis/accounts/docs/OAuth2UserAgent.html\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.google.com/o/oauth2/auth',\n\t\t\t\tgrant: 'https://accounts.google.com/o/oauth2/token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'https://www.googleapis.com/auth/plus.me profile',\n\t\t\t\temail: 'email',\n\t\t\t\tbirthday: '',\n\t\t\t\tevents: '',\n\t\t\t\tphotos: 'https://picasaweb.google.com/data/',\n\t\t\t\tvideos: 'http://gdata.youtube.com',\n\t\t\t\tfriends: 'https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login',\n\t\t\t\tfiles: 'https://www.googleapis.com/auth/drive.readonly',\n\t\t\t\tpublish: '',\n\t\t\t\tpublish_files: 'https://www.googleapis.com/auth/drive',\n\t\t\t\tcreate_event: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tif (p.qs.display === 'none') {\n\t\t\t\t\t// Google doesn't like display=none\n\t\t\t\t\tp.qs.display = '';\n\t\t\t\t}\n\n\t\t\t\tif (p.qs.response_type === 'code') {\n\n\t\t\t\t\t// Let's set this to an offline access to return a refresh_token\n\t\t\t\t\tp.qs.access_type = 'offline';\n\t\t\t\t}\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.google.com/identity/protocols/\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.approval_prompt = 'force';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API base URI\n\t\t\tbase: 'https://www.googleapis.com/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'plus/v1/people/me',\n\n\t\t\t\t// Deprecated Sept 1, 2014\n\t\t\t\t//'me': 'oauth2/v1/userinfo?alt=json',\n\n\t\t\t\t// See: https://developers.google.com/+/api/latest/people/list\n\t\t\t\t'me/friends': 'plus/v1/people/me/people/visible?maxResults=@{limit|100}',\n\t\t\t\t'me/following': contactsUrl,\n\t\t\t\t'me/followers': contactsUrl,\n\t\t\t\t'me/contacts': contactsUrl,\n\t\t\t\t'me/share': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/feed': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/albums': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}',\n\t\t\t\t'me/album': function(p, callback) {\n\t\t\t\t\tvar key = p.query.id;\n\t\t\t\t\tdelete p.query.id;\n\t\t\t\t\tcallback(key.replace('/entry/', '/feed/'));\n\t\t\t\t},\n\n\t\t\t\t'me/photos': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/file': 'drive/v2/files/@{id}',\n\t\t\t\t'me/files': 'drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folders': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folder': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\n\t\t\t\t// Google Drive\n\t\t\t\t'me/files': uploadDrive,\n\t\t\t\t'me/folders': function(p, callback) {\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\ttitle: p.data.name,\n\t\t\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\t\t\tmimeType: 'application/vnd.google-apps.folder'\n\t\t\t\t\t};\n\t\t\t\t\tcallback('drive/v2/files');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map PUT requests\n\t\t\tput: {\n\t\t\t\t'me/files': uploadDrive\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'drive/v2/files/@{id}',\n\t\t\t\t'me/folder': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\t// Map PATCH requests\n\t\t\tpatch: {\n\t\t\t\t'me/file': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\to.last_name = o.family_name || (o.name ? o.name.familyName : null);\n\t\t\t\t\t\to.first_name = o.given_name || (o.name ? o.name.givenName : null);\n\n\t\t\t\t\t\tif (o.emails && o.emails.length) {\n\t\t\t\t\t\t\to.email = o.emails[0].value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tformatPerson(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': function(o) {\n\t\t\t\t\tif (o.items) {\n\t\t\t\t\t\tpaging(o);\n\t\t\t\t\t\to.data = o.items;\n\t\t\t\t\t\to.data.forEach(formatPerson);\n\t\t\t\t\t\tdelete o.items;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/share': formatFeed,\n\t\t\t\t'me/feed': formatFeed,\n\t\t\t\t'me/albums': gEntry,\n\t\t\t\t'me/photos': formatPhotos,\n\t\t\t\t'default': gEntry\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method === 'post' || p.method === 'put') {\n\t\t\t\t\ttoJSON(p);\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'patch') {\n\t\t\t\t\thello.utils.extend(p.query, p.data);\n\t\t\t\t\tp.data = null;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Don't even try submitting via form.\n\t\t\t// This means no POST operations in <=IE9\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction toInt(s) {\n\t\treturn parseInt(s, 10);\n\t}\n\n\tfunction formatFeed(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\t\tdelete o.items;\n\t\treturn o;\n\t}\n\n\t// Format: ensure each record contains a name, id etc.\n\tfunction formatItem(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!o.name) {\n\t\t\to.name = o.title || o.message;\n\t\t}\n\n\t\tif (!o.picture) {\n\t\t\to.picture = o.thumbnailLink;\n\t\t}\n\n\t\tif (!o.thumbnail) {\n\t\t\to.thumbnail = o.thumbnailLink;\n\t\t}\n\n\t\tif (o.mimeType === 'application/vnd.google-apps.folder') {\n\t\t\to.type = 'folder';\n\t\t\to.files = 'https://www.googleapis.com/drive/v2/files?q=%22' + o.id + '%22+in+parents';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatPhotos(o) {\n\t\to.data = o.feed.entry.map(formatEntry);\n\t\tdelete o.feed;\n\t}\n\n\t// Google has a horrible JSON API\n\tfunction gEntry(o) {\n\t\tpaging(o);\n\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\to.data = o.feed.entry.map(formatEntry);\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\t// Old style: Picasa, etc.\n\t\telse if ('entry' in o) {\n\t\t\treturn formatEntry(o.entry);\n\t\t}\n\n\t\t// New style: Google Drive & Plus\n\t\telse if ('items' in o) {\n\t\t\to.data = o.items.map(formatItem);\n\t\t\tdelete o.items;\n\t\t}\n\t\telse {\n\t\t\tformatItem(o);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatPerson(o) {\n\t\to.name = o.displayName || o.name;\n\t\to.picture = o.picture || (o.image ? o.image.url : null);\n\t\to.thumbnail = o.picture;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tpaging(o);\n\t\tvar r = [];\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tfor (var i = 0; i < o.feed.entry.length; i++) {\n\t\t\t\tvar a = o.feed.entry[i];\n\n\t\t\t\ta.id\t= a.id.$t;\n\t\t\t\ta.name\t= a.title.$t;\n\t\t\t\tdelete a.title;\n\t\t\t\tif (a.gd$email) {\n\t\t\t\t\ta.email\t= (a.gd$email && a.gd$email.length > 0) ? a.gd$email[0].address : null;\n\t\t\t\t\ta.emails = a.gd$email;\n\t\t\t\t\tdelete a.gd$email;\n\t\t\t\t}\n\n\t\t\t\tif (a.updated) {\n\t\t\t\t\ta.updated = a.updated.$t;\n\t\t\t\t}\n\n\t\t\t\tif (a.link) {\n\n\t\t\t\t\tvar pic = (a.link.length > 0) ? a.link[0].href : null;\n\t\t\t\t\tif (pic && a.link[0].gd$etag) {\n\t\t\t\t\t\tpic += (pic.indexOf('?') > -1 ? '&' : '?') + 'access_token=' + token;\n\t\t\t\t\t\ta.picture = pic;\n\t\t\t\t\t\ta.thumbnail = pic;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete a.link;\n\t\t\t\t}\n\n\t\t\t\tif (a.category) {\n\t\t\t\t\tdelete a.category;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\to.data = o.feed.entry;\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatEntry(a) {\n\n\t\tvar group = a.media$group;\n\t\tvar photo = group.media$content.length ? group.media$content[0] : {};\n\t\tvar mediaContent = group.media$content || [];\n\t\tvar mediaThumbnail = group.media$thumbnail || [];\n\n\t\tvar pictures = mediaContent\n\t\t\t.concat(mediaThumbnail)\n\t\t\t.map(formatImage)\n\t\t\t.sort(function(a, b) {\n\t\t\t\treturn a.width - b.width;\n\t\t\t});\n\n\t\tvar i = 0;\n\t\tvar _a;\n\t\tvar p = {\n\t\t\tid: a.id.$t,\n\t\t\tname: a.title.$t,\n\t\t\tdescription: a.summary.$t,\n\t\t\tupdated_time: a.updated.$t,\n\t\t\tcreated_time: a.published.$t,\n\t\t\tpicture: photo ? photo.url : null,\n\t\t\tpictures: pictures,\n\t\t\timages: [],\n\t\t\tthumbnail: photo ? photo.url : null,\n\t\t\twidth: photo.width,\n\t\t\theight: photo.height\n\t\t};\n\n\t\t// Get feed/children\n\t\tif ('link' in a) {\n\t\t\tfor (i = 0; i < a.link.length; i++) {\n\t\t\t\tvar d = a.link[i];\n\t\t\t\tif (d.rel.match(/\\#feed$/)) {\n\t\t\t\t\tp.upload_location = p.files = p.photos = d.href;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('category' in a && a.category.length) {\n\t\t\t_a = a.category;\n\t\t\tfor (i = 0; i < _a.length; i++) {\n\t\t\t\tif (_a[i].scheme && _a[i].scheme.match(/\\#kind$/)) {\n\t\t\t\t\tp.type = _a[i].term.replace(/^.*?\\#/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('media$thumbnail' in group && group.media$thumbnail.length) {\n\t\t\t_a = group.media$thumbnail;\n\t\t\tp.thumbnail = _a[0].url;\n\t\t\tp.images = _a.map(formatImage);\n\t\t}\n\n\t\t_a = group.media$content;\n\n\t\tif (_a && _a.length) {\n\t\t\tp.images.push(formatImage(_a[0]));\n\t\t}\n\n\t\treturn p;\n\t}\n\n\tfunction paging(res) {\n\n\t\t// Contacts V2\n\t\tif ('feed' in res && res.feed.openSearch$itemsPerPage) {\n\t\t\tvar limit = toInt(res.feed.openSearch$itemsPerPage.$t);\n\t\t\tvar start = toInt(res.feed.openSearch$startIndex.$t);\n\t\t\tvar total = toInt(res.feed.openSearch$totalResults.$t);\n\n\t\t\tif ((start + limit) < total) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: '?start=' + (start + limit)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\telse if ('nextPageToken' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?pageToken=' + res.nextPageToken\n\t\t\t};\n\t\t}\n\t}\n\n\t// Construct a multipart message\n\tfunction Multipart() {\n\n\t\t// Internal body\n\t\tvar body = [];\n\t\tvar boundary = (Math.random() * 1e10).toString(32);\n\t\tvar counter = 0;\n\t\tvar lineBreak = '\\r\\n';\n\t\tvar delim = lineBreak + '--' + boundary;\n\t\tvar ready = function() {};\n\n\t\tvar dataUri = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\n\t\t// Add file\n\t\tfunction addFile(item) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function(e) {\n\t\t\t\taddContent(btoa(e.target.result), item.type + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t};\n\n\t\t\tfr.readAsBinaryString(item);\n\t\t}\n\n\t\t// Add content\n\t\tfunction addContent(content, type) {\n\t\t\tbody.push(lineBreak + 'Content-Type: ' + type + lineBreak + lineBreak + content);\n\t\t\tcounter--;\n\t\t\tready();\n\t\t}\n\n\t\t// Add new things to the object\n\t\tthis.append = function(content, type) {\n\n\t\t\t// Does the content have an array\n\t\t\tif (typeof (content) === 'string' || !('length' in Object(content))) {\n\t\t\t\t// Converti to multiples\n\t\t\t\tcontent = [content];\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < content.length; i++) {\n\n\t\t\t\tcounter++;\n\n\t\t\t\tvar item = content[i];\n\n\t\t\t\t// Is this a file?\n\t\t\t\t// Files can be either Blobs or File types\n\t\t\t\tif (\n\t\t\t\t\t(typeof (File) !== 'undefined' && item instanceof File) ||\n\t\t\t\t\t(typeof (Blob) !== 'undefined' && item instanceof Blob)\n\t\t\t\t) {\n\t\t\t\t\t// Read the file in\n\t\t\t\t\taddFile(item);\n\t\t\t\t}\n\n\t\t\t\t// Data-URI?\n\t\t\t\t// Data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\t\t\t\t// /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i\n\t\t\t\telse if (typeof (item) === 'string' && item.match(dataUri)) {\n\t\t\t\t\tvar m = item.match(dataUri);\n\t\t\t\t\taddContent(item.replace(dataUri, ''), m[1] + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t\t}\n\n\t\t\t\t// Regular string\n\t\t\t\telse {\n\t\t\t\t\taddContent(item, type);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onready = function(fn) {\n\t\t\tready = function() {\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Trigger ready\n\t\t\t\t\tbody.unshift('');\n\t\t\t\t\tbody.push('--');\n\t\t\t\t\tfn(body.join(delim), boundary);\n\t\t\t\t\tbody = [];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tready();\n\t\t};\n\t}\n\n\t// Upload to Drive\n\t// If this is PUT then only augment the file uploaded\n\t// PUT https://developers.google.com/drive/v2/reference/files/update\n\t// POST https://developers.google.com/drive/manage-uploads\n\tfunction uploadDrive(p, callback) {\n\n\t\tvar data = {};\n\n\t\t// Test for DOM element\n\t\tif (p.data &&\n\t\t\t(typeof (HTMLInputElement) !== 'undefined' && p.data instanceof HTMLInputElement)\n\t\t) {\n\t\t\tp.data = {file: p.data};\n\t\t}\n\n\t\tif (!p.data.name && Object(Object(p.data.file).files).length && p.method === 'post') {\n\t\t\tp.data.name = p.data.file.files[0].name;\n\t\t}\n\n\t\tif (p.method === 'post') {\n\t\t\tp.data = {\n\t\t\t\ttitle: p.data.name,\n\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\tfile: p.data.file\n\t\t\t};\n\t\t}\n\t\telse {\n\n\t\t\t// Make a reference\n\t\t\tdata = p.data;\n\t\t\tp.data = {};\n\n\t\t\t// Add the parts to change as required\n\t\t\tif (data.parent) {\n\t\t\t\tp.data.parents = [{id: p.data.parent || 'root'}];\n\t\t\t}\n\n\t\t\tif (data.file) {\n\t\t\t\tp.data.file = data.file;\n\t\t\t}\n\n\t\t\tif (data.name) {\n\t\t\t\tp.data.title = data.name;\n\t\t\t}\n\t\t}\n\n\t\t// Extract the file, if it exists from the data object\n\t\t// If the File is an INPUT element lets just concern ourselves with the NodeList\n\t\tvar file;\n\t\tif ('file' in p.data) {\n\t\t\tfile = p.data.file;\n\t\t\tdelete p.data.file;\n\n\t\t\tif (typeof (file) === 'object' && 'files' in file) {\n\t\t\t\t// Assign the NodeList\n\t\t\t\tfile = file.files;\n\t\t\t}\n\n\t\t\tif (!file || !file.length) {\n\t\t\t\tcallback({\n\t\t\t\t\terror: {\n\t\t\t\t\t\tcode: 'request_invalid',\n\t\t\t\t\t\tmessage: 'There were no files attached with this request to upload'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Set type p.data.mimeType = Object(file[0]).type || 'application/octet-stream';\n\n\t\t// Construct a multipart message\n\t\tvar parts = new Multipart();\n\t\tparts.append(JSON.stringify(p.data), 'application/json');\n\n\t\t// Read the file into a  base64 string... yep a hassle, i know\n\t\t// FormData doesn't let us assign our own Multipart headers and HTTP Content-Type\n\t\t// Alas GoogleApi need these in a particular format\n\t\tif (file) {\n\t\t\tparts.append(file);\n\t\t}\n\n\t\tparts.onready(function(body, boundary) {\n\n\t\t\tp.headers['content-type'] = 'multipart/related; boundary=\"' + boundary + '\"';\n\t\t\tp.data = body;\n\n\t\t\tcallback('upload/drive/v2/files' + (data.id ? '/' + data.id : '') + '?uploadType=multipart');\n\t\t});\n\n\t}\n\n\tfunction toJSON(p) {\n\t\tif (typeof (p.data) === 'object') {\n\t\t\t// Convert the POST into a javascript object\n\t\t\ttry {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\tp.headers['content-type'] = 'application/json';\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\thello.init({\n\n\t\tinstagram: {\n\n\t\t\tname: 'Instagram',\n\n\t\t\toauth: {\n\t\t\t\t// See: http://instagram.com/developer/authentication/\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://instagram.com/oauth/authorize/',\n\t\t\t\tgrant: 'https://api.instagram.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'basic',\n\t\t\t\tphotos: '',\n\t\t\t\tfriends: 'relationships',\n\t\t\t\tpublish: 'likes comments'\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Instagram throws errors like 'JavaScript API is unsupported' if the display is 'popup'.\n\t\t\t\t// Make the display anything but 'popup'\n\t\t\t\tp.qs.display = '';\n\t\t\t},\n\n\t\t\tbase: 'https://api.instagram.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/feed': 'users/self/feed?count=@{limit|100}',\n\t\t\t\t'me/photos': 'users/self/media/recent?min_id=0&count=@{limit|100}',\n\t\t\t\t'me/friends': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/following': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/followers': 'users/self/followed-by?count=@{limit|100}',\n\t\t\t\t'friend/photos': 'users/@{id}/media/recent?min_id=0&count=@{limit|100}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('media/' + id + '/likes');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'me/like': 'media/@{id}/likes'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.id = o.data.id;\n\t\t\t\t\t\to.thumbnail = o.data.profile_picture;\n\t\t\t\t\t\to.name = o.data.full_name || o.data.username;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/photos': function(o) {\n\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.data = o.data.filter(function(d) {\n\t\t\t\t\t\t\treturn d.type === 'image';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\to.data.forEach(function(d) {\n\t\t\t\t\t\t\td.name = d.caption ? d.caption.text : null;\n\t\t\t\t\t\t\td.thumbnail = d.images.thumbnail.url;\n\t\t\t\t\t\t\td.picture = d.images.standard_resolution.url;\n\t\t\t\t\t\t\td.pictures = Object.keys(d.images)\n\t\t\t\t\t\t\t\t.map(function(key) {\n\t\t\t\t\t\t\t\t\tvar image = d.images[key];\n\t\t\t\t\t\t\t\t\treturn formatImage(image);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\to = formatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Instagram does not return any CORS Headers\n\t\t\t// So besides JSONP we're stuck with proxy\n\t\t\txhr: function(p, qs) {\n\n\t\t\t\tvar method = p.method;\n\t\t\t\tvar proxy = method !== 'get';\n\n\t\t\t\tif (proxy) {\n\n\t\t\t\t\tif ((method === 'post' || method === 'put') && p.query.access_token) {\n\t\t\t\t\t\tp.data.access_token = p.query.access_token;\n\t\t\t\t\t\tdelete p.query.access_token;\n\t\t\t\t\t}\n\n\t\t\t\t\t// No access control headers\n\t\t\t\t\t// Use the proxy instead\n\t\t\t\t\tp.proxy = proxy;\n\t\t\t\t}\n\n\t\t\t\treturn proxy;\n\t\t\t},\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatError(o) {\n\t\tif (typeof o === 'string') {\n\t\t\treturn {\n\t\t\t\terror: {\n\t\t\t\t\tcode: 'invalid_request',\n\t\t\t\t\tmessage: o\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tpaging(o);\n\t\tif (o && 'data' in o) {\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.profile_picture;\n\t\t\to.name = o.full_name || o.username;\n\t\t}\n\t}\n\n\t// See: http://instagram.com/developer/endpoints/\n\tfunction paging(res) {\n\t\tif ('pagination' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.pagination.next_url\n\t\t\t};\n\t\t\tdelete res.pagination;\n\t\t}\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\thello.init({\n\n\t\tjoinme: {\n\n\t\t\tname: 'join.me',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://secure.join.me/api/public/v1/auth/oauth2',\n\t\t\t\tgrant: 'https://secure.join.me/api/public/v1/auth/oauth2'\n\t\t\t},\n\n\t\t\trefresh: false,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'user_info',\n\t\t\t\tuser: 'user_info',\n\t\t\t\tscheduler: 'scheduler',\n\t\t\t\tstart: 'start_meeting'\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.options.popup.width = 400;\n\t\t\t\tp.options.popup.height = 700;\n\t\t\t},\n\n\t\t\tbase: 'https://api.join.me/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\tmeetings: 'meetings',\n\t\t\t\t'meetings/info': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'meetings/start/adhoc': function(p, callback) {\n\t\t\t\t\tcallback('meetings/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/start/scheduled': function(p, callback) {\n\t\t\t\t\tvar meetingId = p.data.meetingId;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('meetings/' + meetingId + '/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/schedule': function(p, callback) {\n\t\t\t\t\tcallback('meetings');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpatch: {\n\t\t\t\t'meetings/update': function(p, callback) {\n\t\t\t\t\tcallback('meetings/' + p.data.meetingId);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'meetings/delete': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (!o.email) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.fullName;\n\t\t\t\t\to.first_name = o.name.split(' ')[0];\n\t\t\t\t\to.last_name = o.name.split(' ')[1];\n\t\t\t\t\to.id = o.email;\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest\n\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar errorCode;\n\t\tvar message;\n\t\tvar details;\n\n\t\tif (o && ('Message' in o)) {\n\t\t\tmessage = o.Message;\n\t\t\tdelete o.Message;\n\n\t\t\tif ('ErrorCode' in o) {\n\t\t\t\terrorCode = o.ErrorCode;\n\t\t\t\tdelete o.ErrorCode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\terrorCode = getErrorCode(headers);\n\t\t\t}\n\n\t\t\to.error = {\n\t\t\t\tcode: errorCode,\n\t\t\t\tmessage: message,\n\t\t\t\tdetails: o\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\t// Move the access token from the request body to the request header\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tp.headers.Authorization = 'Bearer ' + token;\n\n\t\t// Format non-get requests to indicate json body\n\t\tif (p.method !== 'get' && p.data) {\n\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t}\n\t\t}\n\n\t\tif (p.method === 'put') {\n\t\t\tp.method = 'patch';\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction getErrorCode(headers) {\n\t\tswitch (headers.statusCode) {\n\t\t\tcase 400:\n\t\t\t\treturn 'invalid_request';\n\t\t\tcase 403:\n\t\t\t\treturn 'stale_token';\n\t\t\tcase 401:\n\t\t\t\treturn 'invalid_token';\n\t\t\tcase 500:\n\t\t\t\treturn 'server_error';\n\t\t\tdefault:\n\t\t\t\treturn 'server_error';\n\t\t}\n\t}\n\n}(hello));\n",
    "(function(hello) {\n\n\thello.init({\n\n\t\tlinkedin: {\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tresponse_type: 'code',\n\t\t\t\tauth: 'https://www.linkedin.com/uas/oauth2/authorization',\n\t\t\t\tgrant: 'https://www.linkedin.com/uas/oauth2/accessToken'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'r_basicprofile',\n\t\t\t\temail: 'r_emailaddress',\n\t\t\t\tfriends: '',\n\t\t\t\tpublish: 'w_share'\n\t\t\t},\n\t\t\tscope_delim: ' ',\n\n\t\t\tbase: 'https://api.linkedin.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)',\n\n\t\t\t\t// See: http://developer.linkedin.com/documents/get-network-updates-and-statistics-api\n\t\t\t\t'me/share': 'people/~/network/updates?count=@{limit|250}'\n\t\t\t},\n\n\t\t\tpost: {\n\n\t\t\t\t// See: https://developer.linkedin.com/documents/api-requests-json\n\t\t\t\t'me/share': function(p, callback) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tvisibility: {\n\t\t\t\t\t\t\tcode: 'anyone'\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (p.data.id) {\n\n\t\t\t\t\t\tdata.attribution = {\n\t\t\t\t\t\t\tshare: {\n\t\t\t\t\t\t\t\tid: p.data.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdata.comment = p.data.message;\n\t\t\t\t\t\tif (p.data.picture && p.data.link) {\n\t\t\t\t\t\t\tdata.content = {\n\t\t\t\t\t\t\t\t'submitted-url': p.data.link,\n\t\t\t\t\t\t\t\t'submitted-image-url': p.data.picture\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tp.data = JSON.stringify(data);\n\n\t\t\t\t\tcallback('people/~/shares?format=json');\n\t\t\t\t},\n\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\tdel:{\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/share': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.values) {\n\t\t\t\t\t\to.data = o.values.map(formatUser);\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.message = item.headline;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.values;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tempty(o, headers);\n\t\t\t\t\tpaging(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tformatQuery(qs);\n\t\t\t\tif (p.method === 'get') {\n\t\t\t\t\tqs.format = 'jsonp';\n\t\t\t\t\tqs['error-callback'] = p.callbackID;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method !== 'get') {\n\t\t\t\t\tformatQuery(qs);\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\n\t\t\t\t\t// Note: x-li-format ensures error responses are not returned in XML\n\t\t\t\t\tp.headers['x-li-format'] = 'json';\n\t\t\t\t\tp.proxy = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'errorCode' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: o.status,\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\to.first_name = o.firstName;\n\t\to.last_name = o.lastName;\n\t\to.name = o.formattedName || (o.first_name + ' ' + o.last_name);\n\t\to.thumbnail = o.pictureUrl;\n\t\to.email = o.emailAddress;\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.values) {\n\t\t\to.data = o.values.map(formatUser);\n\t\t\tdelete o.values;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif ('_count' in res && '_start' in res && (res._count + res._start) < res._total) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res._start + res._count) + '&count=' + res._count\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction empty(o, headers) {\n\t\tif (JSON.stringify(o) === '{}' && headers.statusCode === 200) {\n\t\t\to.success = true;\n\t\t}\n\t}\n\n\tfunction formatQuery(qs) {\n\t\t// LinkedIn signs requests with the parameter 'oauth2_access_token'\n\t\t// ... yeah another one who thinks they should be different!\n\t\tif (qs.access_token) {\n\t\t\tqs.oauth2_access_token = qs.access_token;\n\t\t\tdelete qs.access_token;\n\t\t}\n\t}\n\n\tfunction like(p, callback) {\n\t\tp.headers['x-li-format'] = 'json';\n\t\tvar id = p.data.id;\n\t\tp.data = (p.method !== 'delete').toString();\n\t\tp.method = 'put';\n\t\tcallback('people/~/network/updates/key=' + id + '/is-liked');\n\t}\n\n})(hello);\n",
    "// See: https://developers.soundcloud.com/docs/api/reference\n(function(hello) {\n\n\thello.init({\n\n\t\tsoundcloud: {\n\t\t\tname: 'SoundCloud',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://soundcloud.com/connect',\n\t\t\t\tgrant: 'https://soundcloud.com/oauth2/token'\n\t\t\t},\n\n\t\t\t// Request path translated\n\t\t\tbase: 'https://api.soundcloud.com/',\n\t\t\tget: {\n\t\t\t\tme: 'me.json',\n\n\t\t\t\t// Http://developers.soundcloud.com/docs/api/reference#me\n\t\t\t\t'me/friends': 'me/followings.json',\n\t\t\t\t'me/followers': 'me/followers.json',\n\t\t\t\t'me/following': 'me/followings.json',\n\n\t\t\t\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\t\t\t\t'default': function(p, callback) {\n\n\t\t\t\t\t// Include '.json at the end of each request'\n\t\t\t\t\tcallback(p.path + '.json');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Response handlers\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {\n\t\t\t\t\t\t\tdata: o.map(formatUser)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatRequest(p, qs) {\n\t\t// Alter the querystring\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs['_status_code_map[302]'] = 200;\n\t\treturn true;\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.picture = o.avatar_url;\n\t\t\to.thumbnail = o.avatar_url;\n\t\t\to.name = o.username || o.full_name;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\tfunction paging(res) {\n\t\tif ('next_href' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.next_href\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\tvar base = 'https://api.twitter.com/';\n\n\thello.init({\n\n\t\ttwitter: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: base + 'oauth/authenticate',\n\t\t\t\trequest: base + 'oauth/request_token',\n\t\t\t\ttoken: base + 'oauth/access_token'\n\t\t\t},\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://dev.twitter.com/oauth/reference/get/oauth/authenticate\n\t\t\t\tvar prefix = '?force_login=true';\n\t\t\t\tthis.oauth.auth = this.oauth.auth.replace(prefix, '') + (p.options.force ? prefix : '');\n\t\t\t},\n\n\t\t\tbase: base + '1.1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'account/verify_credentials.json',\n\t\t\t\t'me/friends': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/following': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/followers': 'followers/list.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline\n\t\t\t\t'me/share': 'statuses/user_timeline.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/rest/reference/get/favorites/list\n\t\t\t\t'me/like': 'favorites/list.json?count=@{limit|200}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/share': function(p, callback) {\n\n\t\t\t\t\tvar data = p.data;\n\t\t\t\t\tp.data = null;\n\n\t\t\t\t\tvar status = [];\n\n\t\t\t\t\t// Change message to status\n\t\t\t\t\tif (data.message) {\n\t\t\t\t\t\tstatus.push(data.message);\n\t\t\t\t\t\tdelete data.message;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If link is given\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tstatus.push(data.link);\n\t\t\t\t\t\tdelete data.link;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.picture) {\n\t\t\t\t\t\tstatus.push(data.picture);\n\t\t\t\t\t\tdelete data.picture;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Compound all the components\n\t\t\t\t\tif (status.length) {\n\t\t\t\t\t\tdata.status = status.join(' ');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet media\n\t\t\t\t\tif (data.file) {\n\t\t\t\t\t\tdata['media[]'] = data.file;\n\t\t\t\t\t\tdelete data.file;\n\t\t\t\t\t\tp.data = data;\n\t\t\t\t\t\tcallback('statuses/update_with_media.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Retweet?\n\t\t\t\t\telse if ('id' in data) {\n\t\t\t\t\t\tcallback('statuses/retweet/' + data.id + '.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Assign the post body to the query parameters\n\t\t\t\t\t\thello.utils.extend(p.query, data);\n\t\t\t\t\t\tcallback('statuses/update.json?include_entities=1');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/create\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/create.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/destroy\n\t\t\t\t'me/like': function() {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/destroy.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tformatUser(res);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\n\t\t\t\t'me/share': function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\tif (!res.error && 'length' in res) {\n\t\t\t\t\t\treturn {data: res};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'default': function(res) {\n\t\t\t\t\tres = arrayToDataResponse(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t},\n\t\t\txhr: function(p) {\n\n\t\t\t\t// Rely on the proxy for non-GET requests.\n\t\t\t\treturn (p.method !== 'get');\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\tif (o.name) {\n\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\to.first_name = m.shift();\n\t\t\t\to.last_name = m.join(' ');\n\t\t\t}\n\n\t\t\t// See: https://dev.twitter.com/overview/general/user-profile-images-and-banners\n\t\t\to.thumbnail = o.profile_image_url_https || o.profile_image_url;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.users) {\n\t\t\to.data = o.users.map(formatUser);\n\t\t\tdelete o.users;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o.errors) {\n\t\t\tvar e = o.errors[0];\n\t\t\to.error = {\n\t\t\t\tcode: 'request_failed',\n\t\t\t\tmessage: e.message\n\t\t\t};\n\t\t}\n\t}\n\n\t// Take a cursor and add it to the path\n\tfunction paging(res) {\n\t\t// Does the response include a 'next_cursor_string'\n\t\tif ('next_cursor_str' in res) {\n\t\t\t// See: https://dev.twitter.com/docs/misc/cursoring\n\t\t\tres.paging = {\n\t\t\t\tnext: '?cursor=' + res.next_cursor_str\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction arrayToDataResponse(res) {\n\t\treturn Array.isArray(res) ? {data: res} : res;\n\t}\n\n\t/**\n\t// The documentation says to define user in the request\n\t// Although its not actually required.\n\n\tvar user_id;\n\n\tfunction withUserId(callback){\n\t\tif(user_id){\n\t\t\tcallback(user_id);\n\t\t}\n\t\telse{\n\t\t\thello.api('twitter:/me', function(o){\n\t\t\t\tuser_id = o.id;\n\t\t\t\tcallback(o.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction sign(url){\n\t\treturn function(p, callback){\n\t\t\twithUserId(function(user_id){\n\t\t\t\tcallback(url+'?user_id='+user_id);\n\t\t\t});\n\t\t};\n\t}\n\t*/\n\n})(hello);\n",
    "// Vkontakte (vk.com)\n(function(hello) {\n\n\thello.init({\n\n\t\tvk: {\n\t\t\tname: 'Vk',\n\n\t\t\t// See https://vk.com/dev/oauth_dialog\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://oauth.vk.com/authorize',\n\t\t\t\tgrant: 'https://oauth.vk.com/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\temail: 'email',\n\t\t\t\toffline_access: 'offline'\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.qs.display = window.navigator &&\n\t\t\t\t\twindow.navigator.userAgent &&\n\t\t\t\t\t/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase()) ? 'mobile' : 'popup';\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.vk.com/method/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: function(p, callback) {\n\t\t\t\t\tp.query.fields = 'id,first_name,last_name,photo_max';\n\t\t\t\t\tcallback('users.get');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res, headers, req) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\treturn formatUser(res, req);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// No XHR\n\t\t\txhr: false,\n\n\t\t\t// All requests should be JSONP as of missing CORS headers in https://api.vk.com/method/*\n\t\t\tjsonp: true,\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatUser(o, req) {\n\n\t\tif (o !== null && 'response' in o && o.response !== null && o.response.length) {\n\t\t\to = o.response[0];\n\t\t\to.id = o.uid;\n\t\t\to.thumbnail = o.picture = o.photo_max;\n\t\t\to.name = o.first_name + ' ' + o.last_name;\n\n\t\t\tif (req.authResponse && req.authResponse.email !== null)\n\t\t\t\to.email = req.authResponse.email;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\n\t\tif (o.error) {\n\t\t\tvar e = o.error;\n\t\t\to.error = {\n\t\t\t\tcode: e.error_code,\n\t\t\t\tmessage: e.error_msg\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\thello.init({\n\t\twindows: {\n\t\t\tname: 'Windows live',\n\n\t\t\t// REF: http://msdn.microsoft.com/en-us/library/hh243641.aspx\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://login.live.com/oauth20_authorize.srf',\n\t\t\t\tgrant: 'https://login.live.com/oauth20_token.srf'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tlogout: function() {\n\t\t\t\treturn 'http://login.live.com/oauth20_logout.srf?ts=' + (new Date()).getTime();\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'wl.signin,wl.basic',\n\t\t\t\temail: 'wl.emails',\n\t\t\t\tbirthday: 'wl.birthday',\n\t\t\t\tevents: 'wl.calendars',\n\t\t\t\tphotos: 'wl.photos',\n\t\t\t\tvideos: 'wl.photos',\n\t\t\t\tfriends: 'wl.contacts_emails',\n\t\t\t\tfiles: 'wl.skydrive',\n\t\t\t\tpublish: 'wl.share',\n\t\t\t\tpublish_files: 'wl.skydrive_update',\n\t\t\t\tcreate_event: 'wl.calendars_update,wl.events_create',\n\t\t\t\toffline_access: 'wl.offline_access'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://apis.live.net/v5.0/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\n\t\t\t\t// Friends\n\t\t\t\tme: 'me',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/contacts',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/contacts': 'me/contacts',\n\n\t\t\t\t'me/albums': 'me/albums',\n\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}/files',\n\t\t\t\t'me/photo': '@{id}',\n\n\t\t\t\t// Files\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files',\n\t\t\t\t'me/folders': '@{id|me/skydrive}/files',\n\t\t\t\t'me/folder': '@{id|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/albums': 'me/albums',\n\t\t\t\t'me/album': '@{id}/files/',\n\n\t\t\t\t'me/folders': '@{id|me/skydrive/}',\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'me/folder': '@{id}',\n\t\t\t\t'me/files': '@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': formatAlbums,\n\t\t\t\t'me/photos': formatDefault,\n\t\t\t\t'default': formatDefault\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\t\t\t\tif (p.method !== 'get' && p.method !== 'delete' && !hello.utils.hasBinary(p.data)) {\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t\tp.headers = {\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tjsonp: function(p) {\n\t\t\t\tif (p.method !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = p.method;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatDefault(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\tif (d.images) {\n\t\t\t\t\td.pictures = d.images\n\t\t\t\t\t\t.map(formatImage)\n\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\twidth: image.width,\n\t\t\theight: image.height,\n\t\t\tsource: image.source\n\t\t};\n\t}\n\n\tfunction formatAlbums(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\td.photos = d.files = 'https://apis.live.net/v5.0/' + d.id + '/photos';\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatUser(o, headers, req) {\n\t\tif (o.id) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tif (o.emails) {\n\t\t\t\to.email = o.emails.preferred;\n\t\t\t}\n\n\t\t\t// If this is not an non-network friend\n\t\t\tif (o.is_friend !== false) {\n\t\t\t\t// Use the id of the user_id if available\n\t\t\t\tvar id = (o.user_id || o.id);\n\t\t\t\to.thumbnail = o.picture = 'https://apis.live.net/v5.0/' + id + '/picture?access_token=' + token;\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tformatUser(d, headers, req);\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n",
    "(function(hello) {\n\n\thello.init({\n\n\t\tyahoo: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://api.login.yahoo.com/oauth/v2/request_auth',\n\t\t\t\trequest: 'https://api.login.yahoo.com/oauth/v2/get_request_token',\n\t\t\t\ttoken: 'https://api.login.yahoo.com/oauth/v2/get_token'\n\t\t\t},\n\n\t\t\t// Login handler\n\t\t\tlogin: function(p) {\n\t\t\t\t// Change the default popup window to be at least 560\n\t\t\t\t// Yahoo does dynamically change it on the fly for the signin screen (only, what if your already signed in)\n\t\t\t\tp.options.popup.width = 560;\n\n\t\t\t\t// Yahoo throws an parameter error if for whatever reason the state.scope contains a comma, so lets remove scope\n\t\t\t\ttry {delete p.qs.state.scope;}\n\t\t\t\tcatch (e) {}\n\t\t\t},\n\n\t\t\tbase: 'https://social.yahooapis.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: yql('select * from social.profile(0) where guid=me'),\n\t\t\t\t'me/friends': yql('select * from social.contacts(0) where guid=me'),\n\t\t\t\t'me/following': yql('select * from social.contacts(0) where guid=me')\n\t\t\t},\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t// Can't get IDs\n\t\t\t\t// It might be better to loop through the social.relationship table with has unique IDs of users.\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'default': paging\n\t\t\t}\n\t\t}\n\t});\n\n\t/*\n\t\t// Auto-refresh fix: bug in Yahoo can't get this to work with node-oauth-shim\n\t\tlogin : function(o){\n\t\t\t// Is the user already logged in\n\t\t\tvar auth = hello('yahoo').getAuthResponse();\n\n\t\t\t// Is this a refresh token?\n\t\t\tif(o.options.display==='none'&&auth&&auth.access_token&&auth.refresh_token){\n\t\t\t\t// Add the old token and the refresh token, including path to the query\n\t\t\t\t// See http://developer.yahoo.com/oauth/guide/oauth-refreshaccesstoken.html\n\t\t\t\to.qs.access_token = auth.access_token;\n\t\t\t\to.qs.refresh_token = auth.refresh_token;\n\t\t\t\to.qs.token_url = 'https://api.login.yahoo.com/oauth/v2/get_token';\n\t\t\t}\n\t\t},\n\t*/\n\n\tfunction formatError(o) {\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\n\t\tformatError(o);\n\t\tif (o.query && o.query.results && o.query.results.profile) {\n\t\t\to = o.query.results.profile;\n\t\t\to.id = o.guid;\n\t\t\to.last_name = o.familyName;\n\t\t\to.first_name = o.givenName || o.nickname;\n\t\t\tvar a = [];\n\t\t\tif (o.first_name) {\n\t\t\t\ta.push(o.first_name);\n\t\t\t}\n\n\t\t\tif (o.last_name) {\n\t\t\t\ta.push(o.last_name);\n\t\t\t}\n\n\t\t\to.name = a.join(' ');\n\t\t\to.email = (o.emails && o.emails[0]) ? o.emails[0].handle : null;\n\t\t\to.thumbnail = o.image ? o.image.imageUrl : null;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, request) {\n\t\tformatError(o);\n\t\tpaging(o, headers, request);\n\t\tvar contact;\n\t\tvar field;\n\t\tif (o.query && o.query.results && o.query.results.contact) {\n\t\t\to.data = o.query.results.contact;\n\t\t\tdelete o.query;\n\n\t\t\tif (!Array.isArray(o.data)) {\n\t\t\t\to.data = [o.data];\n\t\t\t}\n\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(contact) {\n\t\tcontact.id = null;\n\n\t\t// #362: Reports of responses returning a single item, rather than an Array of items.\n\t\t// Format the contact.fields to be an array.\n\t\tif (contact.fields && !(contact.fields instanceof Array)) {\n\t\t\tcontact.fields = [contact.fields];\n\t\t}\n\n\t\t(contact.fields || []).forEach(function(field) {\n\t\t\tif (field.type === 'email') {\n\t\t\t\tcontact.email = field.value;\n\t\t\t}\n\n\t\t\tif (field.type === 'name') {\n\t\t\t\tcontact.first_name = field.value.givenName;\n\t\t\t\tcontact.last_name = field.value.familyName;\n\t\t\t\tcontact.name = field.value.givenName + ' ' + field.value.familyName;\n\t\t\t}\n\n\t\t\tif (field.type === 'yahooid') {\n\t\t\t\tcontact.id = field.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction paging(res, headers, request) {\n\n\t\t// See: http://developer.yahoo.com/yql/guide/paging.html#local_limits\n\t\tif (res.query && res.query.count && request.options) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res.query.count + (+request.options.start || 1))\n\t\t\t};\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tfunction yql(q) {\n\t\treturn 'https://query.yahooapis.com/v1/yql?q=' + (q + ' limit @{limit|100} offset @{start|0}').replace(/\\s/g, '%20') + '&format=json';\n\t}\n\n})(hello);\n"
  ]
}