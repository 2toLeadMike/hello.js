<!DOCTYPE html>

<link rel="stylesheet" href="/_packages/document.css"></script>
<script src="/_packages/document.js"></script>

<script src="client_ids.js"></script>
<script src="../src/hello.js"></script>
<script src="../src/modules/google.js"></script>

<h1>hello Promises</h1>

<p>Promises/A+ 1.1.1 interoperability is included in dist/* files, otherwise can be optional when packaging your own modules from src directory and requires the following script...</p>

<script class="pre" src="../src/hello.then.js"></script>

<h2>Example</h2>
<p>This demo illustrates using Promises with hello.login and hello.api calls</p>

<button id='google' onclick="login('google');">google</button>

<script class="pre">
function login(network){
	// Make a login call and handle the response using promises
	hello.login(network).then(function(){
		console.log('fullfilled', 'making api call');
		// Reurn another promise to get the users profile.
		return 	hello( network ).api( '/me' );
	}).then(function(p){
		console.log('then fullfilled', p);
		document.getElementById(network).innerHTML = "<img src='"+ p.thumbnail + "' width=24/>Connected to "+ network+" as " + p.name;
	});

}
</script>

<p>Setup</p>

<script class="pre">
hello.init( CLIENT_IDS,	{
	redirect_uri:'../redirect.html'
});
</script>