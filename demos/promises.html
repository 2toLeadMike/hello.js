<!DOCTYPE html>

<link rel="stylesheet" href="/_packages/document.css"></script>
<script src="/_packages/document.js"></script>

<script src="client_ids.js"></script>
<script src="../src/hello.js"></script>
<script src="../src/hello.then.js"></script>
<script src="../src/modules/google.js"></script>

<h1>Demo hello.then, promises</h1>
<button id='google' onclick="login('google');">google</button>

<script class="pre">

function login(network){

	// Make a login call using promise
	hello.login(network).then(function(){
		console.log('fullfilled', 'making api call');
		return 	hello( network ).api( '/me' );
	}).then(function(p){
		console.log('then fullfilled', p);
		document.getElementById(network).innerHTML = "<img src='"+ p.thumbnail + "' width=24/>Connected to "+ network+" as " + p.name;
	});

}

hello.init( CLIENT_IDS,	{redirect_uri:'../redirect.html'});
</script>